"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getFileLoaderOptions = getFileLoaderOptions;
exports.issuerForStyleFiles = issuerForStyleFiles;
exports.issuerForNonStyleFiles = issuerForNonStyleFiles;
exports.issuerForJsTsFiles = issuerForJsTsFiles;
exports.issuerForNonJsTsFiles = issuerForNonJsTsFiles;
exports.getFileLoaderForJsAndStyleAssets = getFileLoaderForJsAndStyleAssets;
exports.getStyleLoaderUses = getStyleLoaderUses;
exports.getResolvedLoader = getResolvedLoader;
exports.postCssLoader = exports.lessLoader = exports.sassLoader = exports.cssLoader = exports.fileLoader = exports.babelLoader = void 0;

var _miniCssExtractPlugin = _interopRequireDefault(require("mini-css-extract-plugin"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * This file holds useful utility functions for file-loader
 */

/**
 * Get options for file-loader.
 *
 * This takes into account the appDir, development or production mode and
 * publicPath for file-loader usage from css files.
 *
 * @param appDir Application directory (corresponds to files[i].name).
 * @param isDev Whether this is for development or production build.
 * @param publicPath Whether to include publicPath.
 */
function getFileLoaderOptions(appDir, isDev, publicPath) {
  const fileLoaderOptions = {
    name: `[name]-[hash:8].[ext]`,
    outputPath: `${appDir}/assets/`
  };

  if (publicPath) {
    // Here mention the public path relative to the css
    // file directory. Since we are now using mini-css-extract-plugin
    // this would be always the assets directory
    fileLoaderOptions.publicPath = `assets/`;
  }

  return fileLoaderOptions;
}
/**
 * Webpack module.rules[].issuer function to check if the issuer is
 * a style file (scss, sass, css).
 */


function issuerForStyleFiles(location) {
  return /\.(sa|sc|c|le)ss$/.test(location);
}
/**
 * Webpack module.rules[].issuer function to check if the issuer is NOT
 * a style file (scss, sass, css).
 */


function issuerForNonStyleFiles(location) {
  return !/\.(sa|sc|c|le)ss$/.test(location);
}
/**
 * Webpack module.rules[].issuer function to check if the issuer is NOT a
 * JavaScript (js,jsx) or TypeScript(ts,tsx) file.
 */


function issuerForJsTsFiles(location) {
  return /\.(j|t)sx?$/.test(location);
}
/**
 * Webpack module.rules[].issuer function to check if the issuer is a JavaScript
 * (js,jsx) or TypeScript(ts,tsx) file.
 */


function issuerForNonJsTsFiles(location) {
  return !/\.(j|t)sx?$/.test(location);
}
/**
 * Get file-loader with proper options set for javascript and style files.
 *
 * It makes sure that assets are put into proper directory and relativePath
 * works fine for css imports.
 *
 * @param appDir Application directory (corresponds to files[i].name).
 * @param isDev Whether this is for development or production build.
 * @param loader Name of the loader, defaults to `file-loader`.
 */


function getFileLoaderForJsAndStyleAssets(appDir, isDev, loader = require.resolve('file-loader')) {
  // create file rules
  // But use relativePath for style type resources like sass, scss or css
  // This is needed because we can't know the absolute publicPath
  // of CSS imported assets.
  const fileLoaderTest = /\.(woff|woff2|eot|ttf|otf|png|jpg|gif)(\?v=\d+\.\d+\.\d+)?$/;
  const fileRulesNonStyle = {
    test: fileLoaderTest,
    use: [{
      loader,
      options: getFileLoaderOptions(appDir, isDev, false)
    }],
    issuer: issuerForNonStyleFiles
  };
  const fileRulesStyle = {
    test: fileLoaderTest,
    use: [{
      loader,
      options: getFileLoaderOptions(appDir, isDev, true)
    }],
    issuer: issuerForStyleFiles
  };
  return {
    fileRulesNonStyle,
    fileRulesStyle
  };
}

function getStyleLoaderUses(isDev, publicPathUrl, preprocessor) {
  const styleLoader = [{
    loader: _miniCssExtractPlugin.default.loader,
    options: {
      publicPath: isDev ? publicPathUrl : ''
    }
  }, {
    loader: require.resolve('css-loader'),
    options: {
      importLoaders: preprocessor ? 2 : 1,
      sourceMap: true
    }
  }, {
    loader: require.resolve('postcss-loader'),
    options: {
      sourceMap: true
    }
  }];
  return styleLoader;
}
/**
 * Get resolved loader from @wpackio/scripts for your own usage.
 *
 * @param loader Webpack Loader.
 */


function getResolvedLoader(loader) {
  return require.resolve(loader);
} // export all built-in loaders


const babelLoader = getResolvedLoader('babel-loader');
exports.babelLoader = babelLoader;
const fileLoader = getResolvedLoader('file-loader');
exports.fileLoader = fileLoader;
const cssLoader = getResolvedLoader('css-loader');
exports.cssLoader = cssLoader;
const sassLoader = getResolvedLoader('sass-loader');
exports.sassLoader = sassLoader;
const lessLoader = getResolvedLoader('less-loader');
exports.lessLoader = lessLoader;
const postCssLoader = getResolvedLoader('postcss-loader');
exports.postCssLoader = postCssLoader;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb25maWcvbG9hZGVySGVscGVycy50cyJdLCJuYW1lcyI6WyJnZXRGaWxlTG9hZGVyT3B0aW9ucyIsImFwcERpciIsImlzRGV2IiwicHVibGljUGF0aCIsImZpbGVMb2FkZXJPcHRpb25zIiwibmFtZSIsIm91dHB1dFBhdGgiLCJpc3N1ZXJGb3JTdHlsZUZpbGVzIiwibG9jYXRpb24iLCJ0ZXN0IiwiaXNzdWVyRm9yTm9uU3R5bGVGaWxlcyIsImlzc3VlckZvckpzVHNGaWxlcyIsImlzc3VlckZvck5vbkpzVHNGaWxlcyIsImdldEZpbGVMb2FkZXJGb3JKc0FuZFN0eWxlQXNzZXRzIiwibG9hZGVyIiwicmVxdWlyZSIsInJlc29sdmUiLCJmaWxlTG9hZGVyVGVzdCIsImZpbGVSdWxlc05vblN0eWxlIiwidXNlIiwib3B0aW9ucyIsImlzc3VlciIsImZpbGVSdWxlc1N0eWxlIiwiZ2V0U3R5bGVMb2FkZXJVc2VzIiwicHVibGljUGF0aFVybCIsInByZXByb2Nlc3NvciIsInN0eWxlTG9hZGVyIiwiTWluaUNzc0V4dHJhY3RQbHVnaW4iLCJpbXBvcnRMb2FkZXJzIiwic291cmNlTWFwIiwiZ2V0UmVzb2x2ZWRMb2FkZXIiLCJiYWJlbExvYWRlciIsImZpbGVMb2FkZXIiLCJjc3NMb2FkZXIiLCJzYXNzTG9hZGVyIiwibGVzc0xvYWRlciIsInBvc3RDc3NMb2FkZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUNBOzs7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sU0FBU0Esb0JBQVQsQ0FDTkMsTUFETSxFQUVOQyxLQUZNLEVBR05DLFVBSE0sRUFJTDtBQUNELFFBQU1DLGlCQUFzRCxHQUFHO0FBQzlEQyxJQUFBQSxJQUFJLEVBQUcsdUJBRHVEO0FBRTlEQyxJQUFBQSxVQUFVLEVBQUcsR0FBRUwsTUFBTztBQUZ3QyxHQUEvRDs7QUFJQSxNQUFJ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RUFBMkM7QUFDakQsU0FBT0MsT0FBTyxDQUFDQyxPQUFSLENBQWdCRixNQUFoQixDQUFQO0FBQ0EsQyxDQUVEOzs7QUFDTyxNQUFNaUIsV0FBVyxHQUFHRCxpQkFBaUIsQ0FBQyxjQUFELENBQXJDOztBQUNBLE1BQU1FLFVBQVUsR0FBR0YsaUJBQWlCLENBQUMsYUFBRCxDQUFwQzs7QUFDQSxNQUFNRyxTQUFTLEdBQUdILGlCQUFpQixDQUFDLFlBQUQsQ0FBbkM7O0FBQ0EsTUFBTUksVUFBVSxHQUFHSixpQkFBaUIsQ0FBQyxhQUFELENBQXBDOztBQUNBLE1BQU1LLFVBQVUsR0FBR0wsaUJBQWlCLENBQUMsYUFBRCxDQUFwQzs7QUFDQSxNQUFNTSxhQUFhLEdBQUdOLGlCQUFpQixDQUFDLGdCQUFELENBQXZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHdlYnBhY2sgZnJvbSAnd2VicGFjayc7XG5pbXBvcnQgTWluaUNzc0V4dHJhY3RQbHVnaW4gZnJvbSAnbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4nO1xuXG4vKipcbiAqIFRoaXMgZmlsZSBob2xkcyB1c2VmdWwgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIGZpbGUtbG9hZGVyXG4gKi9cblxuLyoqXG4gKiBHZXQgb3B0aW9ucyBmb3IgZmlsZS1sb2FkZXIuXG4gKlxuICogVGhpcyB0YWtlcyBpbnRvIGFjY291bnQgdGhlIGFwcERpciwgZGV2ZWxvcG1lbnQgb3IgcHJvZHVjdGlvbiBtb2RlIGFuZFxuICogcHVibGljUGF0aCBmb3IgZmlsZS1sb2FkZXIgdXNhZ2UgZnJvbSBjc3MgZmlsZXMuXG4gKlxuICogQHBhcmFtIGFwcERpciBBcHBsaWNhdGlvbiBkaXJlY3RvcnkgKGNvcnJlc3BvbmRzIHRvIGZpbGVzW2ldLm5hbWUpLlxuICogQHBhcmFtIGlzRGV2IFdoZXRoZXIgdGhpcyBpcyBmb3IgZGV2ZWxvcG1lbnQgb3IgcHJvZHVjdGlvbiBidWlsZC5cbiAqIEBwYXJhbSBwdWJsaWNQYXRoIFdoZXRoZXIgdG8gaW5jbHVkZSBwdWJsaWNQYXRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUxvYWRlck9wdGlvbnMoXG5cdGFwcERpcjogc3RyaW5nLFxuXHRpc0RldjogYm9vbGVhbixcblx0cHVibGljUGF0aDogYm9vbGVhblxuKSB7XG5cdGNvbnN0IGZpbGVMb2FkZXJPcHRpb25zOiB7IFt4OiBzdHJpbmddOiBzdHJpbmcgfCB1bmRlZmluZWQgfSA9IHtcblx0XHRuYW1lOiBgW25hbWVdLVtoYXNoOjhdLltleHRdYCxcblx0XHRvdXRwdXRQYXRoOiBgJHthcHBEaXJ9L2Fzc2V0cy9gLFxuXHR9O1xuXHRpZiAocHVibGljUGF0aCkge1xuXHRcdC8vIEhlcmUgbWVudGlvbiB0aGUgcHVibGljIHBhdGggcmVsYXRpdmUgdG8gdGhlIGNzc1xuXHRcdC8vIGZpbGUgZGlyZWN0b3J5LiBTaW5jZSB3ZSBhcmUgbm93IHVzaW5nIG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5cdFx0Ly8gdGhpcyB3b3VsZCBiZSBhbHdheXMgdGhlIGFzc2V0cyBkaXJlY3Rvcnlcblx0XHRmaWxlTG9hZGVyT3B0aW9ucy5wdWJsaWNQYXRoID0gYGFzc2V0cy9gO1xuXHR9XG5cdHJldHVybiBmaWxlTG9hZGVyT3B0aW9ucztcbn1cblxuLyoqXG4gKiBXZWJwYWNrIG1vZHVsZS5ydWxlc1tdLmlzc3VlciBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgaXNzdWVyIGlzXG4gKiBhIHN0eWxlIGZpbGUgKHNjc3MsIHNhc3MsIGNzcykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc3N1ZXJGb3JTdHlsZUZpbGVzKGxvY2F0aW9uOiBzdHJpbmcpOiBib29sZWFuIHtcblx0cmV0dXJuIC9cXC4oc2F8c2N8Y3xsZSlzcyQvLnRlc3QobG9jYXRpb24pO1xufVxuXG4vKipcbiAqIFdlYnBhY2sgbW9kdWxlLnJ1bGVzW10uaXNzdWVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSBpc3N1ZXIgaXMgTk9UXG4gKiBhIHN0eWxlIGZpbGUgKHNjc3MsIHNhc3MsIGNzcykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc3N1ZXJGb3JOb25TdHlsZUZpbGVzKGxvY2F0aW9uOiBzdHJpbmcpOiBib29sZWFuIHtcblx0cmV0dXJuICEvXFwuKHNhfHNjfGN8bGUpc3MkLy50ZXN0KGxvY2F0aW9uKTtcbn1cblxuLyoqXG4gKiBXZWJwYWNrIG1vZHVsZS5ydWxlc1tdLmlzc3VlciBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgaXNzdWVyIGlzIE5PVCBhXG4gKiBKYXZhU2NyaXB0IChqcyxqc3gpIG9yIFR5cGVTY3JpcHQodHMsdHN4KSBmaWxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNzdWVyRm9ySnNUc0ZpbGVzKGxvY2F0aW9uOiBzdHJpbmcpOiBib29sZWFuIHtcblx0cmV0dXJuIC9cXC4oanx0KXN4PyQvLnRlc3QobG9jYXRpb24pO1xufVxuXG4vKipcbiAqIFdlYnBhY2sgbW9kdWxlLnJ1bGVzW10uaXNzdWVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSBpc3N1ZXIgaXMgYSBKYXZhU2NyaXB0XG4gKiAoanMsanN4KSBvciBUeXBlU2NyaXB0KHRzLHRzeCkgZmlsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzc3VlckZvck5vbkpzVHNGaWxlcyhsb2NhdGlvbjogc3RyaW5nKTogYm9vbGVhbiB7XG5cdHJldHVybiAhL1xcLihqfHQpc3g/JC8udGVzdChsb2NhdGlvbik7XG59XG5cbi8qKlxuICogR2V0IGZpbGUtbG9hZGVyIHdpdGggcHJvcGVyIG9wdGlvbnMgc2V0IGZvciBqYXZhc2NyaXB0IGFuZCBzdHlsZSBmaWxlcy5cbiAqXG4gKiBJdCBtYWtlcyBzdXJlIHRoYXQgYXNzZXRzIGFyZSBwdXQgaW50byBwcm9wZXIgZGlyZWN0b3J5IGFuZCByZWxhdGl2ZVBhdGhcbiAqIHdvcmtzIGZpbmUgZm9yIGNzcyBpbXBvcnRzLlxuICpcbiAqIEBwYXJhbSBhcHBEaXIgQXBwbGljYXRpb24gZGlyZWN0b3J5IChjb3JyZXNwb25kcyB0byBmaWxlc1tpXS5uYW1lKS5cbiAqIEBwYXJhbSBpc0RldiBXaGV0aGVyIHRoaXMgaXMgZm9yIGRldmVsb3BtZW50IG9yIHByb2R1Y3Rpb24gYnVpbGQuXG4gKiBAcGFyYW0gbG9hZGVyIE5hbWUgb2YgdGhlIGxvYWRlciwgZGVmYXVsdHMgdG8gYGZpbGUtbG9hZGVyYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVMb2FkZXJGb3JKc0FuZFN0eWxlQXNzZXRzKFxuXHRhcHBEaXI6IHN0cmluZyxcblx0aXNEZXY6IGJvb2xlYW4sXG5cdGxvYWRlcjogc3RyaW5nID0gcmVxdWlyZS5yZXNvbHZlKCdmaWxlLWxvYWRlcicpXG4pIHtcblx0Ly8gY3JlYXRlIGZpbGUgcnVsZXNcblx0Ly8gQnV0IHVzZSByZWxhdGl2ZVBhdGggZm9yIHN0eWxlIHR5cGUgcmVzb3VyY2VzIGxpa2Ugc2Fzcywgc2NzcyBvciBjc3Ncblx0Ly8gVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSB3ZSBjYW4ndCBrbm93IHRoZSBhYnNvbHV0ZSBwdWJsaWNQYXRoXG5cdC8vIG9mIENTUyBpbXBvcnRlZCBhc3NldHMuXG5cdGNvbnN0IGZpbGVMb2FkZXJUZXN0ID1cblx0XHQvXFwuKHdvZmZ8d29mZjJ8ZW90fHR0ZnxvdGZ8cG5nfGpwZ3xnaWYpKFxcP3Y9XFxkK1xcLlxcZCtcXC5cXGQrKT8kLztcblxuXHRjb25zdCBmaWxlUnVsZXNOb25TdHlsZTogd2VicGFjay5SdWxlU2V0UnVsZSA9IHtcblx0XHR0ZXN0OiBmaWxlTG9hZGVyVGVzdCxcblx0XHR1c2U6IFtcblx0XHRcdHtcblx0XHRcdFx0bG9hZGVyLFxuXHRcdFx0XHRvcHRpb25zOiBnZXRGaWxlTG9hZGVyT3B0aW9ucyhhcHBEaXIsIGlzRGV2LCBmYWxzZSksXG5cdFx0XHR9LFxuXHRcdF0sXG5cdFx0aXNzdWVyOiBpc3N1ZXJGb3JOb25TdHlsZUZpbGVzLFxuXHR9O1xuXHRjb25zdCBmaWxlUnVsZXNTdHlsZTogd2VicGFjay5SdWxlU2V0UnVsZSA9IHtcblx0XHR0ZXN0OiBmaWxlTG9hZGVyVGVzdCxcblx0XHR1c2U6IFtcblx0XHRcdHtcblx0XHRcdFx0bG9hZGVyLFxuXHRcdFx0XHRvcHRpb25zOiBnZXRGaWxlTG9hZGVyT3B0aW9ucyhhcHBEaXIsIGlzRGV2LCB0cnVlKSxcblx0XHRcdH0sXG5cdFx0XSxcblx0XHRpc3N1ZXI6IGlzc3VlckZvclN0eWxlRmlsZXMsXG5cdH07XG5cblx0cmV0dXJuIHsgZmlsZVJ1bGVzTm9uU3R5bGUsIGZpbGVSdWxlc1N0eWxlIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHlsZUxvYWRlclVzZXMoXG5cdGlzRGV2OiBib29sZWFuLFxuXHRwdWJsaWNQYXRoVXJsOiBzdHJpbmcsXG5cdHByZXByb2Nlc3NvcjogYm9vbGVhblxuKSB7XG5cdGNvbnN0IHN0eWxlTG9hZGVyOiB3ZWJwYWNrLlJ1bGVTZXRSdWxlWyd1c2UnXSA9IFtcblx0XHR7XG5cdFx0XHRsb2FkZXI6IE1pbmlDc3NFeHRyYWN0UGx1Z2luLmxvYWRlcixcblx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0cHVibGljUGF0aDogaXNEZXYgPyBwdWJsaWNQYXRoVXJsIDogJycsXG5cdFx0XHR9LFxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0bG9hZGVyOiByZXF1aXJlLnJlc29sdmUoJ2Nzcy1sb2FkZXInKSxcblx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0aW1wb3J0TG9hZGVyczogcHJlcHJvY2Vzc29yID8gMiA6IDEsXG5cdFx0XHRcdHNvdXJjZU1hcDogdHJ1ZSxcblx0XHRcdH0sXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRsb2FkZXI6IHJlcXVpcmUucmVzb2x2ZSgncG9zdGNzcy1sb2FkZXInKSxcblx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0c291cmNlTWFwOiB0cnVlLFxuXHRcdFx0fSxcblx0XHR9LFxuXHRdO1xuXG5cdHJldHVybiBzdHlsZUxvYWRlcjtcbn1cblxuLyoqXG4gKiBHZXQgcmVzb2x2ZWQgbG9hZGVyIGZyb20gQHdwYWNraW8vc2NyaXB0cyBmb3IgeW91ciBvd24gdXNhZ2UuXG4gKlxuICogQHBhcmFtIGxvYWRlciBXZWJwYWNrIExvYWRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlc29sdmVkTG9hZGVyKGxvYWRlcjogc3RyaW5nKSB7XG5cdHJldHVybiByZXF1aXJlLnJlc29sdmUobG9hZGVyKTtcbn1cblxuLy8gZXhwb3J0IGFsbCBidWlsdC1pbiBsb2FkZXJzXG5leHBvcnQgY29uc3QgYmFiZWxMb2FkZXIgPSBnZXRSZXNvbHZlZExvYWRlcignYmFiZWwtbG9hZGVyJyk7XG5leHBvcnQgY29uc3QgZmlsZUxvYWRlciA9IGdldFJlc29sdmVkTG9hZGVyKCdmaWxlLWxvYWRlcicpO1xuZXhwb3J0IGNvbnN0IGNzc0xvYWRlciA9IGdldFJlc29sdmVkTG9hZGVyKCdjc3MtbG9hZGVyJyk7XG5leHBvcnQgY29uc3Qgc2Fzc0xvYWRlciA9IGdldFJlc29sdmVkTG9hZGVyKCdzYXNzLWxvYWRlcicpO1xuZXhwb3J0IGNvbnN0IGxlc3NMb2FkZXIgPSBnZXRSZXNvbHZlZExvYWRlcignbGVzcy1sb2FkZXInKTtcbmV4cG9ydCBjb25zdCBwb3N0Q3NzTG9hZGVyID0gZ2V0UmVzb2x2ZWRMb2FkZXIoJ3Bvc3Rjc3MtbG9hZGVyJyk7XG4iXX0=