"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Pack = void 0;

var _archiver = _interopRequireDefault(require("archiver"));

var _cpy = _interopRequireDefault(require("cpy"));

var _del = _interopRequireDefault(require("del"));

var _fs = _interopRequireDefault(require("fs"));

var _makeDir = _interopRequireDefault(require("make-dir"));

var _path = _interopRequireDefault(require("path"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

class Pack {
  constructor(projectConfig, callbacks, cwd) {
    _defineProperty(this, "projectConfig", void 0);

    _defineProperty(this, "packageSlugPath", void 0);

    _defineProperty(this, "packageDirPath", void 0);

    _defineProperty(this, "packageZipPath", void 0);

    _defineProperty(this, "cwd", void 0);

    _defineProperty(this, "callbacks", void 0);

    this.projectConfig = projectConfig;
    this.cwd = cwd;
    this.callbacks = callbacks;
    this.packageDirPath = _path.default.resolve(this.cwd, projectConfig.packageDirPath);
    this.packageSlugPath = _path.default.resolve(this.cwd, this.packageDirPath, projectConfig.slug);
    this.packageZipPath = _path.default.resolve(this.cwd, this.packageDirPath, `${this.projectConfig.slug}.zip`);
  }

  async pack() {
    // First make the directory if needed
    const packagePath = await this.mkDirPackage();
    this.callbacks.onMkDirPackage(packagePath); // Clean up

    const cleanUps = await this.clean();
    this.callbacks.onClean(cleanUps); // Create copy to (slug) directory

    const slugPath = await this.mkDirPackageSlug();
    this.callbacks.onMkDirSlug(slugPath); // Copy files

    this.callbacks.onBeforeCopy();
    await this.copy();
    this.callbacks.onCopy(); // Zip

    this.callbacks.onBeforeZip();
    const result = await this.zip();
    this.callbacks.onZip(result);
  }

  async mkDirPackage() {
    return (0, _makeDir.default)(this.packageDirPath);
  }

  async clean() {
    return (0, _del.default)([`${this.packageDirPath}/**`, `!${this.packageDirPath}`]);
  }

  async mkDirPackageSlug() {
    return (0, _makeDir.default)(this.packageSlugPath);
  }

  async copy() {
    return (0, _cpy.default)(this.projectConfig.packageFiles, this.packageSlugPath, {
      parents: true,
      cwd: this.cwd
    }).on('progress', this.callbacks.onCopyProgress);
  }

  async zip() {
    return new Promise((resolve, reject) => {
      // Create the stream
      const output = _fs.default.createWriteStream(this.packageZipPath); // Create archiver object


      const archive = (0, _archiver.default)('zip', {
        zlib: {
          level: this.projectConfig.zlibLevel
        }
      }); // Resolve when output is closed

      output.on('close', () => {
        resolve({
          size: archive.pointer(),
          path: `${this.packageZipPath}`,
          relPath: _path.default.relative(this.cwd, this.packageZipPath)
        });
      }); // Reject on blocking errors and warnings

      archive.on('error', err => {
        reject(err);
      }); // On Progress

      archive.on('progress', this.callbacks.onZipProgress); // Pipe archive to the file

      archive.pipe(output); // Append the directory

      archive.directory(`${this.packageSlugPath}/`, this.projectConfig.slug); // finalize

      archive.finalize();
    });
  }

}

exports.Pack = Pack;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zY3JpcHRzL1BhY2sudHMiXSwibmFtZXMiOlsiUGFjayIsImNvbnN0cnVjdG9yIiwicHJvamVjdENvbmZpZyIsImNhbGxiYWNrcyIsImN3ZCIsInBhY2thZ2VEaXJQYXRoIiwicGF0aCIsInJlc29sdmUiLCJwYWNrYWdlU2x1Z1BhdGgiLCJzbHVnIiwicGFja2FnZVppcFBhdGgiLCJwYWNrIiwicGFja2FnZVBhdGgiLCJta0RpclBhY2thZ2UiLCJvbk1rRGlyUGFja2FnZSIsImNsZWFuVXBzIiwiY2xlYW4iLCJvbkNsZWFuIiwic2x1Z1BhdGgiLCJta0RpclBhY2thZ2VTbHVnIiwib25Na0RpclNsdWciLCJvbkJlZm9yZUNvcHkiLCJjb3B5Iiwib25Db3B5Iiwib25CZWZvcmVaaXAiLCJyZXN1bHQiLCJ6aXAiLCJvblppcCIsInBhY2thZ2VGaWxlcyIsInBhcmVudHMiLCJvbiIsIm9uQ29weVByb2dyZXNzIiwiUHJvbWlzZSIsInJlamVjdCIsIm91dHB1dCIsImZzIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJhcmNoaXZlIiwiemxpYiIsImxldmVsIiwiemxpYkxldmVsIiwic2l6ZSIsInBvaW50ZXIiLCJyZWxQYXRoIiwicmVsYXRpdmUiLCJlcnIiLCJvblppcFByb2dyZXNzIiwicGlwZSIsImRpcmVjdG9yeSIsImZpbmFsaXplIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQXFCTyxNQUFNQSxJQUFOLENBQVc7QUFhakJDLEVBQUFBLFdBQVcsQ0FBQ0MsYUFBRCxFQUErQkMsU0FBL0IsRUFBcURDLEdBQXJELEVBQWtFO0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQzVFLFNBQUtGLGFBQUwsR0FBcUJBLGFBQXJCO0FBQ0EsU0FBS0UsR0FBTCxHQUFXQSxHQUFYO0FBQ0EsU0FBS0QsU0FBTCxHQUFpQkEsU0FBakI7QUFDQSxTQUFLRSxjQUFMLEdBQXNC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QXdCLEtBQUtNLGNBQTdCO0FBSEYsU0FBRCxDQUFQO0FBS0EsT0FORCxFQVR1RCxDQWlCdkQ7O0FBQ0EyQixNQUFBQSxPQUFPLENBQUNQLEVBQVIsQ0FBVyxPQUFYLEVBQW9CZSxHQUFHLElBQUk7QUFDMUJaLFFBQUFBLE1BQU0sQ0FBQ1ksR0FBRCxDQUFOO0FBQ0EsT0FGRCxFQWxCdUQsQ0FzQnZEOztBQUNBUixNQUFBQSxPQUFPLENBQUNQLEVBQVIsQ0FBVyxVQUFYLEVBQXVCLEtBQUszQixTQUFMLENBQWUyQyxhQUF0QyxFQXZCdUQsQ0F5QnZEOztBQUNBVCxNQUFBQSxPQUFPLENBQUNVLElBQVIsQ0FBYWIsTUFBYixFQTFCdUQsQ0E0QnZEOztBQUNBRyxNQUFBQSxPQUFPLENBQUNXLFNBQVIsQ0FBbUIsR0FBRSxLQUFLeEMsZUFBZ0IsR0FBMUMsRUFBOEMsS0FBS04sYUFBTCxDQUFtQk8sSUFBakUsRUE3QnVELENBK0J2RDs7QUFDQTRCLE1BQUFBLE9BQU8sQ0FBQ1ksUUFBUjtBQUNBLEtBakNNLENBQVA7QUFrQ0E7O0FBeEdnQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcmNoaXZlciBmcm9tICdhcmNoaXZlcic7XG5pbXBvcnQgY3B5IGZyb20gJ2NweSc7XG5pbXBvcnQgZGVsIGZyb20gJ2RlbCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IG1ha2VEaXIgZnJvbSAnbWFrZS1kaXInO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBQcm9qZWN0Q29uZmlnIH0gZnJvbSAnLi4vY29uZmlnL3Byb2plY3QuY29uZmlnLmRlZmF1bHQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENhbGxiYWNrcyB7XG5cdG9uTWtEaXJQYWNrYWdlKHBhdGg6IHN0cmluZyk6IHZvaWQ7XG5cdG9uQ2xlYW4ocGF0aHM6IHN0cmluZ1tdKTogdm9pZDtcblx0b25Na0RpclNsdWcocGF0aDogc3RyaW5nKTogdm9pZDtcblx0b25Db3B5KCk6IHZvaWQ7XG5cdG9uQmVmb3JlQ29weSgpOiB2b2lkO1xuXHRvbkNvcHlQcm9ncmVzcyhwcm9ncmVzczogY3B5LlByb2dyZXNzRGF0YSk6IHZvaWQ7XG5cdG9uQmVmb3JlWmlwKCk6IHZvaWQ7XG5cdG9uWmlwUHJvZ3Jlc3MocHJvZ3Jlc3M6IGFyY2hpdmVyLlByb2dyZXNzRGF0YSk6IHZvaWQ7XG5cdG9uWmlwKHJlc3VsdDogQXJjaGl2ZVJlc29sdmUpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFyY2hpdmVSZXNvbHZlIHtcblx0c2l6ZTogbnVtYmVyO1xuXHRwYXRoOiBzdHJpbmc7XG5cdHJlbFBhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFBhY2sge1xuXHRwcml2YXRlIHByb2plY3RDb25maWc6IFByb2plY3RDb25maWc7XG5cblx0cHJpdmF0ZSBwYWNrYWdlU2x1Z1BhdGg6IHN0cmluZztcblxuXHRwcml2YXRlIHBhY2thZ2VEaXJQYXRoOiBzdHJpbmc7XG5cblx0cHJpdmF0ZSBwYWNrYWdlWmlwUGF0aDogc3RyaW5nO1xuXG5cdHByaXZhdGUgY3dkOiBzdHJpbmc7XG5cblx0cHJpdmF0ZSBjYWxsYmFja3M6IENhbGxiYWNrcztcblxuXHRjb25zdHJ1Y3Rvcihwcm9qZWN0Q29uZmlnOiBQcm9qZWN0Q29uZmlnLCBjYWxsYmFja3M6IENhbGxiYWNrcywgY3dkOiBzdHJpbmcpIHtcblx0XHR0aGlzLnByb2plY3RDb25maWcgPSBwcm9qZWN0Q29uZmlnO1xuXHRcdHRoaXMuY3dkID0gY3dkO1xuXHRcdHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuXHRcdHRoaXMucGFja2FnZURpclBhdGggPSBwYXRoLnJlc29sdmUodGhpcy5jd2QsIHByb2plY3RDb25maWcucGFja2FnZURpclBhdGgpO1xuXHRcdHRoaXMucGFja2FnZVNsdWdQYXRoID0gcGF0aC5yZXNvbHZlKFxuXHRcdFx0dGhpcy5jd2QsXG5cdFx0XHR0aGlzLnBhY2thZ2VEaXJQYXRoLFxuXHRcdFx0cHJvamVjdENvbmZpZy5zbHVnXG5cdFx0KTtcblx0XHR0aGlzLnBhY2thZ2VaaXBQYXRoID0gcGF0aC5yZXNvbHZlKFxuXHRcdFx0dGhpcy5jd2QsXG5cdFx0XHR0aGlzLnBhY2thZ2VEaXJQYXRoLFxuXHRcdFx0YCR7dGhpcy5wcm9qZWN0Q29uZmlnLnNsdWd9LnppcGBcblx0XHQpO1xuXHR9XG5cblx0cHVibGljIGFzeW5jIHBhY2soKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gRmlyc3QgbWFrZSB0aGUgZGlyZWN0b3J5IGlmIG5lZWRlZFxuXHRcdGNvbnN0IHBhY2thZ2VQYXRoID0gYXdhaXQgdGhpcy5ta0RpclBhY2thZ2UoKTtcblx0XHR0aGlzLmNhbGxiYWNrcy5vbk1rRGlyUGFja2FnZShwYWNrYWdlUGF0aCk7XG5cdFx0Ly8gQ2xlYW4gdXBcblx0XHRjb25zdCBjbGVhblVwcyA9IGF3YWl0IHRoaXMuY2xlYW4oKTtcblx0XHR0aGlzLmNhbGxiYWNrcy5vbkNsZWFuKGNsZWFuVXBzKTtcblx0XHQvLyBDcmVhdGUgY29weSB0byAoc2x1ZykgZGlyZWN0b3J5XG5cdFx0Y29uc3Qgc2x1Z1BhdGggPSBhd2FpdCB0aGlzLm1rRGlyUGFja2FnZVNsdWcoKTtcblx0XHR0aGlzLmNhbGxiYWNrcy5vbk1rRGlyU2x1ZyhzbHVnUGF0aCk7XG5cdFx0Ly8gQ29weSBmaWxlc1xuXHRcdHRoaXMuY2FsbGJhY2tzLm9uQmVmb3JlQ29weSgpO1xuXHRcdGF3YWl0IHRoaXMuY29weSgpO1xuXHRcdHRoaXMuY2FsbGJhY2tzLm9uQ29weSgpO1xuXHRcdC8vIFppcFxuXHRcdHRoaXMuY2FsbGJhY2tzLm9uQmVmb3JlWmlwKCk7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy56aXAoKTtcblx0XHR0aGlzLmNhbGxiYWNrcy5vblppcChyZXN1bHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBta0RpclBhY2thZ2UoKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRyZXR1cm4gbWFrZURpcih0aGlzLnBhY2thZ2VEaXJQYXRoKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgY2xlYW4oKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRcdHJldHVybiBkZWwoW2Ake3RoaXMucGFja2FnZURpclBhdGh9LyoqYCwgYCEke3RoaXMucGFja2FnZURpclBhdGh9YF0pO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBta0RpclBhY2thZ2VTbHVnKCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0cmV0dXJuIG1ha2VEaXIodGhpcy5wYWNrYWdlU2x1Z1BhdGgpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBjb3B5KCk6IFByb21pc2U8YW55PiB7XG5cdFx0cmV0dXJuIGNweSh0aGlzLnByb2plY3RDb25maWcucGFja2FnZUZpbGVzLCB0aGlzLnBhY2thZ2VTbHVnUGF0aCwge1xuXHRcdFx0cGFyZW50czogdHJ1ZSxcblx0XHRcdGN3ZDogdGhpcy5jd2QsXG5cdFx0fSkub24oJ3Byb2dyZXNzJywgdGhpcy5jYWxsYmFja3Mub25Db3B5UHJvZ3Jlc3MpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB6aXAoKTogUHJvbWlzZTxBcmNoaXZlUmVzb2x2ZT4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxBcmNoaXZlUmVzb2x2ZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBzdHJlYW1cblx0XHRcdGNvbnN0IG91dHB1dCA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKHRoaXMucGFja2FnZVppcFBhdGgpO1xuXHRcdFx0Ly8gQ3JlYXRlIGFyY2hpdmVyIG9iamVjdFxuXHRcdFx0Y29uc3QgYXJjaGl2ZSA9IGFyY2hpdmVyKCd6aXAnLCB7XG5cdFx0XHRcdHpsaWI6IHsgbGV2ZWw6IHRoaXMucHJvamVjdENvbmZpZy56bGliTGV2ZWwgfSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBSZXNvbHZlIHdoZW4gb3V0cHV0IGlzIGNsb3NlZFxuXHRcdFx0b3V0cHV0Lm9uKCdjbG9zZScsICgpID0+IHtcblx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0c2l6ZTogYXJjaGl2ZS5wb2ludGVyKCksXG5cdFx0XHRcdFx0cGF0aDogYCR7dGhpcy5wYWNrYWdlWmlwUGF0aH1gLFxuXHRcdFx0XHRcdHJlbFBhdGg6IHBhdGgucmVsYXRpdmUodGhpcy5jd2QsIHRoaXMucGFja2FnZVppcFBhdGgpLFxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBSZWplY3Qgb24gYmxvY2tpbmcgZXJyb3JzIGFuZCB3YXJuaW5nc1xuXHRcdFx0YXJjaGl2ZS5vbignZXJyb3InLCBlcnIgPT4ge1xuXHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBPbiBQcm9ncmVzc1xuXHRcdFx0YXJjaGl2ZS5vbigncHJvZ3Jlc3MnLCB0aGlzLmNhbGxiYWNrcy5vblppcFByb2dyZXNzKTtcblxuXHRcdFx0Ly8gUGlwZSBhcmNoaXZlIHRvIHRoZSBmaWxlXG5cdFx0XHRhcmNoaXZlLnBpcGUob3V0cHV0KTtcblxuXHRcdFx0Ly8gQXBwZW5kIHRoZSBkaXJlY3Rvcnlcblx0XHRcdGFyY2hpdmUuZGlyZWN0b3J5KGAke3RoaXMucGFja2FnZVNsdWdQYXRofS9gLCB0aGlzLnByb2plY3RDb25maWcuc2x1Zyk7XG5cblx0XHRcdC8vIGZpbmFsaXplXG5cdFx0XHRhcmNoaXZlLmZpbmFsaXplKCk7XG5cdFx0fSk7XG5cdH1cbn1cbiJdfQ==