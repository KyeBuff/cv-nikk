"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addTimeStampToLog = addTimeStampToLog;
exports.printWatchingMessage = printWatchingMessage;
exports.printCompilingMessage = printCompilingMessage;
exports.printCompileTimeMessage = printCompileTimeMessage;
exports.printCompileTimeMessages = printCompileTimeMessages;
exports.printSuccessfullyCompiledMessage = printSuccessfullyCompiledMessage;
exports.printCompiledWithWarnMessage = printCompiledWithWarnMessage;
exports.printFailedCompileMEssage = printFailedCompileMEssage;
exports.printGeneralInfoMessage = printGeneralInfoMessage;
exports.printErrorHeading = printErrorHeading;
exports.printWarningHeading = printWarningHeading;
exports.printSuccessHeading = printSuccessHeading;
exports.isYarn = isYarn;
exports.printIntro = printIntro;
exports.resolveCWD = resolveCWD;
exports.serverInfo = serverInfo;
exports.serveEntryInfo = serveEntryInfo;
exports.endServeInfo = endServeInfo;
exports.endBuildInfo = endBuildInfo;
exports.endBootstrapInfo = endBootstrapInfo;
exports.prettyPrintError = prettyPrintError;
exports.getProgressBar = getProgressBar;
exports.getFileCopyProgress = getFileCopyProgress;
exports.getZipProgress = getZipProgress;
exports.endPackInfo = endPackInfo;
exports.entriesHelp = exports.contextHelp = exports.wpackIntro = exports.wpackLink = exports.webpackStatToJsonOptions = exports.watchEllipsis = exports.watchSymbol = exports.donationSentence = exports.wpackLogoSmall = exports.wpackLogo = exports.donationLink = exports.bulletSymbol = void 0;

var _chalk = _interopRequireDefault(require("chalk"));

var _figures = _interopRequireDefault(require("figures"));

var _findUp = _interopRequireDefault(require("find-up"));

var _gradientString = _interopRequireDefault(require("gradient-string"));

var _logSymbols = _interopRequireDefault(require("log-symbols"));

var _path = _interopRequireDefault(require("path"));

var _prettyError = _interopRequireDefault(require("pretty-error"));

var _WpackioError = require("../errors/WpackioError");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const pkgPath = _path.default.resolve(__dirname, '../../package.json'); // eslint-disable-next-line @typescript-eslint/no-var-requires


const pkg = require(pkgPath);

const bulletSymbol = _chalk.default.magenta(_figures.default.pointer);

exports.bulletSymbol = bulletSymbol;
const donationLink = `
    ${bulletSymbol} PATREON: ${_chalk.default.bold.blue.underline('https://www.patreon.com/swashata')}
    ${bulletSymbol} OPENCOLLECTIVE: ${_chalk.default.bold.blue.underline('https://opencollective.com/wpackio')}
`;
exports.donationLink = donationLink;
let isYarnCache = null;
const wpackLogo = `${_chalk.default.bold(_gradientString.default.instagram(`__      __`))}
${_chalk.default.bold(_gradientString.default.instagram(`\\ \\ /\\ / /`))} ${_chalk.default.bold(_gradientString.default.instagram('PACK.IO'))}
${_chalk.default.bold(_gradientString.default.instagram(` \\ V  V /`))}  ${_chalk.default.bold.yellowBright('JavaScript')} tooling for ${_chalk.default.bold.blueBright('WordPress')}
${_chalk.default.bold(_gradientString.default.instagram(`  \\_/\\_/`))}   ${_chalk.default.magenta('v')}${_chalk.default.bold.magenta(`${pkg.version}`)}`;
exports.wpackLogo = wpackLogo;

const wpackLogoSmall = _gradientString.default.instagram('wpack.io');

exports.wpackLogoSmall = wpackLogoSmall;
const donationSentence = `If ${wpackLogoSmall} is worthy, 🙏 consider donating.
${donationLink}
Every amount counts.`;
exports.donationSentence = donationSentence;

function addTimeStampToLog(log) {
  const time = new Date().toTimeString().split(' ')[0];
  return `${_chalk.default.dim(`｢${wpackLogoSmall} ${time}｣`)} ${log}`;
}

const watchSymbol = `${_logSymbols.default.info}`;
exports.watchSymbol = watchSymbol;

const watchEllipsis = _chalk.default.dim(_figures.default.ellipsis);

exports.watchEllipsis = watchEllipsis;

function printWatchingMessage() {
  console.log(addTimeStampToLog(`${watchSymbol} watching for changes${watchEllipsis}`));
}

function printCompilingMessage() {
  console.log(addTimeStampToLog(`${_logSymbols.default.info} compiling changes${watchEllipsis}`));
}

function printCompileTimeMessage(stat, lastStat) {
  // safety
  if (!stat || typeof stat !== 'object' || !stat.builtAt) {
    return;
  }

  if (lastStat === null || typeof lastStat !== 'object' || !lastStat.builtAt || stat.builtAt !== lastStat.builtAt) {
    // get bundle name
    let name = '';

    if (stat.name) {
      const entryName = stat.name;
      name = _chalk.default.green(entryName);

      if (stat.errors.length) {
        name = _chalk.default.red(entryName);
      } else if (stat.warnings.length) {
        name = _chalk.default.yellow(entryName);
      }

      name = `[${name}] `;
    } // get log symbol


    let symbol = _logSymbols.default.success;

    if (stat.errors.length) {
      symbol = _logSymbols.default.error;
    } else if (stat.warnings.length) {
      symbol = _logSymbols.default.warning;
    } // get log message


    let msg = 'was rebuilt in';

    if (lastStat === null) {
      msg = 'was built in';
    }

    console.log(addTimeStampToLog(`${symbol} ${name}bundle ${msg} ${_chalk.default.magenta(`${stat.time}ms`)}.`));
  }
}

const webpackStatToJsonOptions = {
  timings: true,
  assets: false,
  builtAt: true,
  cached: false,
  cachedAssets: false,
  children: true,
  chunkModules: false,
  chunkOrigins: false,
  chunks: false,
  entrypoints: false,
  env: false,
  errors: true,
  warnings: true,
  modules: false,
  publicPath: false,
  depth: false
};
exports.webpackStatToJsonOptions = webpackStatToJsonOptions;

function printCompileTimeMessages(stats, lastStatsJson) {
  let statsJson = null;

  if (stats) {
    statsJson = stats.toJson(webpackStatToJsonOptions);
  }

  if (statsJson !== null && !statsJson.time && statsJson.children && Array.isArray(statsJson.children)) {
    // if it is multicompiler
    statsJson.children.forEach((sj, index) => {
      if (lastStatsJson === null) {
        printCompileTimeMessage(sj, null);
      } else if (lastStatsJson !== null && lastStatsJson.children && Array.isArray(lastStatsJson.children)) {
        printCompileTimeMessage(sj, lastStatsJson.children[index]);
      }
    });
  } else if (statsJson.time) {
    // if it is single compiler
    if (lastStatsJson === null) {
      printCompileTimeMessage(statsJson, null);
    } else {
      printCompileTimeMessage(statsJson, lastStatsJson);
    }
  }
}

function printSuccessfullyCompiledMessage() {
  console.log(addTimeStampToLog(`${_logSymbols.default.success} compiled successfully`));
}

function printCompiledWithWarnMessage() {
  console.log(addTimeStampToLog(`${_logSymbols.default.warning} ${_chalk.default.dim('compiled with warnings...')}`));
}

function printFailedCompileMEssage() {
  console.error(addTimeStampToLog(`${_logSymbols.default.error} ${_chalk.default.dim('failed to compile')}`));
}

function printGeneralInfoMessage(msg, symbol) {
  if (typeof symbol === 'undefined') {
    // eslint-disable-next-line no-param-reassign
    symbol = _logSymbols.default.info;
  }

  console.info(addTimeStampToLog(`${symbol} ${msg}`));
}

function printErrorHeading(msg = 'ERROR') {
  console.log('');
  console.log(`${_chalk.default.bgRed.black(` ${msg} `)} please review`);
  console.log('');
}

function printWarningHeading(msg = 'WARNING') {
  console.log('');
  console.log(`${_chalk.default.bgYellow.black(` ${msg} `)} please review`);
  console.log('');
}

function printSuccessHeading(msg = 'OUTPUT') {
  console.log('');
  console.log(`${_chalk.default.bgGreenBright(_chalk.default.bold.hex('#000000')(` ${msg} `))}`);
  console.log('');
}

const wpackLink = `${_chalk.default.blue.underline('https://wpack.io')}`;
exports.wpackLink = wpackLink;
const wpackIntro = `${wpackLogo}\n`;
exports.wpackIntro = wpackIntro;

function isYarn() {
  const cwd = process.cwd();

  if (isYarnCache !== null) {
    return isYarnCache;
  }

  try {
    isYarnCache = _findUp.default.sync('yarn.lock', {
      cwd
    }) != null;
    return isYarnCache;
  } catch (_) {
    isYarnCache = false;
    return isYarnCache;
  }
}

const contextHelp = `Path to context or project root directory. Defaults to current working directory. It is recommended to use absolute path, else it is calculated from current working directory. The path you mention here should be what the URL 'localhost/wp-content/<themes|plugins>/<slug>/' map to. In most cases, you should leave it, because calling the program from npm or yarn script should automatically set it.`;
exports.contextHelp = contextHelp;
const entriesHelp = `Select entries from wpackio.project.js file for which we start the server. Either 0 based index of the entry, like \`-e 0 2\` will start the 0th and 2nd entry of wpackio project. You can also supply the name of the entries, like \`-e app admin\`. The tool will search wpackio for entries with name set to app and admin. If found, it will start them.`;
exports.entriesHelp = entriesHelp;

function printIntro() {
  console.log(wpackIntro);
}
/**
 * Resolve `cwd`, a.k.a, current working directory or context from user input.
 * It takes into account the `--context [path]` option from CLI and uses process
 * cwd, if not provided.
 *
 * @param options Options as received from CLI
 */


function resolveCWD(options) {
  let cwd = process.cwd(); // If user has provided cwd, then use that instead

  if (options && options.context) {
    const {
      context
    } = options;

    if (_path.default.isAbsolute(options.context)) {
      cwd = context;
    } else {
      cwd = _path.default.resolve(cwd, context);
    }
  }

  return cwd;
}

function serverInfo(url, uiUrl) {
  const msg = `${_logSymbols.default.success} ${wpackLogoSmall} server is running at.

    ${bulletSymbol} ${_chalk.default.blue.underline(url)}

and BrowserSync UI running at

    ${bulletSymbol} ${typeof uiUrl === 'string' ? _chalk.default.blue.underline(uiUrl) : _chalk.default.red('N/A')}

Press ${_chalk.default.yellow('r')} to recompile and ${_chalk.default.yellow('q')} to force quit.
To create production build, run

    ${bulletSymbol} ${_chalk.default.yellow(isYarn() ? 'yarn build' : 'npm run build')}

${_chalk.default.dim('No files are written on disk during development mode.')}`;
  console.log(msg);
}

function serveEntryInfo() {
  const msg = `${_logSymbols.default.info} you can also start selective entries by running

    ${bulletSymbol} ${_chalk.default.yellow(isYarn() ? 'yarn start -e 0 1' : 'npm run start -e 0 1')}
`;
  console.log(msg);
}

function endServeInfo() {
  const msg = `${_logSymbols.default.success} ${wpackLogoSmall} server has been ${_chalk.default.redBright('stopped')}.
To create production build, run

    ${bulletSymbol} ${_chalk.default.yellow(isYarn() ? 'yarn build' : 'npm run build')}.

Thank you for using ${wpackLink}.
To spread the ${_chalk.default.red(_figures.default.heart)} please ${_chalk.default.yellowBright(_figures.default.star)} our repo and tweet.

${donationSentence}`;
  console.log(msg);
}

function endBuildInfo() {
  const msg = `${wpackLogoSmall} production build was ${_chalk.default.green('successful')}.

All files were written to disk and you can visit your local server.

If your filesize is too large, remember you can use advanced
dynamic import and multiple entry-points easily with ${wpackLogoSmall}.

    ${bulletSymbol} For more info, visit: ${wpackLink}.

To spread the ${_chalk.default.red(_figures.default.heart)} please ${_chalk.default.yellowBright(_figures.default.star)} our repo and tweet.

${donationSentence}`;
  console.log(msg);
}

function endBootstrapInfo() {
  const msg = `${wpackLogoSmall} was ${_chalk.default.green('successfully')} integrated within your project.

If this is your first run edit your ${_chalk.default.bold.magenta('wpackio.project.js')} file and put
entrypoints. You will find examples within the file itself.

You should keep ${_chalk.default.bold.yellow('wpackio.server.js')} outside your VCS tracking
as it will most likely differ for different users.

You can run ${_chalk.default.dim('bootstrap')} command again and it will create the
${_chalk.default.bold.yellow('wpackio.server.js')} file if not present.

    ${bulletSymbol} Start Development: ${_chalk.default.yellow(isYarn() ? 'yarn start' : 'npm start')}.
    ${bulletSymbol} Production Build: ${_chalk.default.yellow(isYarn() ? 'yarn build' : 'npm run build')}.
    ${bulletSymbol} Create local server config: ${_chalk.default.yellow(isYarn() ? 'yarn bootstrap' : 'npm run bootstrap')}.
    ${bulletSymbol} Create distributable zip: ${_chalk.default.yellow(isYarn() ? 'yarn archive' : 'npm run archive')}.
    ${bulletSymbol} For more info, visit: ${wpackLink}.

To enqueue the assets within your plugin or theme, make sure you
have ${_chalk.default.yellow('wpackio/enqueue')} package from packagist.org/composer
and follow the intructions from documentation. To install now, run

    ${bulletSymbol} ${_chalk.default.yellow('composer require wpackio/enqueue')}.

To spread the ${_chalk.default.red(_figures.default.heart)} please ${_chalk.default.yellowBright(_figures.default.star)} our repo and tweet.`;
  console.log(msg);
}

function prettyPrintError(e, errorMsg) {
  const errorPrefix = `  ${_chalk.default.dim.red(_figures.default.pointer)}  `;
  console.log(_chalk.default.dim('='.repeat(errorMsg.length + 2)));
  console.log(`${_logSymbols.default.error} ${errorMsg}`);
  console.log(_chalk.default.dim('='.repeat(errorMsg.length + 2)));
  console.log('');

  if (e instanceof _WpackioError.WpackioError) {
    console.log(_chalk.default.bgRed.black(' please review the following errors '));
    console.log('');
    console.error(errorPrefix + e.message.split('\n').reduce((acc, line) => `${acc}\n${errorPrefix}${line}`));
  } else {
    const pe = new _prettyError.default();
    console.error(pe.render(e));
  }

  console.log('\n\n\n');
}

function getProgressBar(done) {
  if (Number.isNaN(done) || done === Infinity || done === -Infinity) {
    // eslint-disable-next-line no-param-reassign
    done = 0;
  }

  const pbDoneLength = Math.floor(done / 100 * 20);
  let gFunc = (0, _gradientString.default)('red', 'red');

  if (pbDoneLength >= 5) {
    gFunc = (0, _gradientString.default)('red', 'red', 'yellow');
  }

  if (pbDoneLength >= 10) {
    gFunc = (0, _gradientString.default)('red', 'red', 'yellow', 'yellow');
  }

  if (pbDoneLength >= 15) {
    gFunc = (0, _gradientString.default)('red', 'red', 'yellow', 'yellow', 'green');
  }

  const pbDone = gFunc('='.repeat(pbDoneLength));

  const pbDoing = _chalk.default.gray('-'.repeat(20 - pbDoneLength));

  return `[${pbDone}${pbDoing}] ${_chalk.default.yellow(done.toFixed(2))}%`;
}

function getFileCopyProgress(progress) {
  let done = 0;
  let totalFiles = 0;
  let filesDone = 0;
  let size = 0;

  if (progress) {
    done = Math.round(progress.completedFiles / progress.totalFiles * 100); // eslint-disable-next-line prefer-destructuring

    totalFiles = progress.totalFiles;
    filesDone = progress.completedFiles;
    size = progress.completedSize;
  }

  return `copying files ${getProgressBar(done)} ${_chalk.default.magenta(filesDone.toString())}${_chalk.default.dim('/')}${_chalk.default.cyan(totalFiles.toString())} Files ${_chalk.default.blue((size / 1024).toFixed(2))} KB`;
}

function getZipProgress(data) {
  let entriesTotal = 0;
  let entriesProcessed = 0;
  let bytesTotal = 0;
  let bytesProcessed = 0;

  if (data) {
    entriesTotal = data.entries.total;
    entriesProcessed = data.entries.processed;
    bytesTotal = data.fs.totalBytes;
    bytesProcessed = data.fs.processedBytes;
  }

  const done = Math.round(entriesProcessed / entriesTotal * 100);
  return `creating zip ${getProgressBar(done)} ${_chalk.default.magenta(entriesProcessed.toString())}${_chalk.default.dim('/')}${_chalk.default.cyan(entriesTotal.toString())} Files ${_chalk.default.blue((bytesProcessed / 1024).toFixed(2))}${_chalk.default.dim('/')}${_chalk.default.cyan((bytesTotal / 1024).toFixed(2))} KB`;
}

function endPackInfo(results) {
  const msg = `${_chalk.default.bgGreenBright(_chalk.default.bold.hex('#000000')(' OUTPUT '))}

    ${bulletSymbol} Zip Location: ${_chalk.default.blue(results.relPath)}.
    ${bulletSymbol} File Size: ${_chalk.default.blue((results.size / 1024).toFixed(2))} KB.

${wpackLogoSmall} package and archive was ${_chalk.default.green('successful')}.

Thank you for using ${wpackLink}.
To spread the ${_chalk.default.red(_figures.default.heart)} please ${_chalk.default.yellowBright(_figures.default.star)} our repo and tweet.

${donationSentence}`;
  console.log(msg);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iaW4vdXRpbHMudHMiXSwibmFtZXMiOlsicGtnUGF0aCIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwicGtnIiwicmVxdWlyZSIsImJ1bGxldFN5bWJvbCIsImNoYWxrIiwibWFnZW50YSIsImZpZ3VyZXMiLCJwb2ludGVyIiwiZG9uYXRpb25MaW5rIiwiYm9sZCIsImJsdWUiLCJ1bmRlcmxpbmUiLCJpc1lhcm5DYWNoZSIsIndwYWNrTG9nbyIsImdyYWRpZW50IiwiaW5zdGFncmFtIiwieWVsbG93QnJpZ2h0IiwiYmx1ZUJyaWdodCIsInZlcnNpb24iLCJ3cGFja0xvZ29TbWFsbCIsImRvbmF0aW9uU2VudGVuY2UiLCJhZGRUaW1lU3RhbXBUb0xvZyIsImxvZyIsInRpbWUiLCJEYXRlIiwidG9UaW1lU3RyaW5nIiwic3BsaXQiLCJkaW0iLCJ3YXRjaFN5bWJvbCIsImxvZ1N5bWJvbHMiLCJpbmZvIiwid2F0Y2hFbGxpcHNpcyIsImVsbGlwc2lzIiwicHJpbnRXYXRjaGluZ01lc3NhZ2UiLCJjb25zb2xlIiwicHJpbnRDb21waWxpbmdNZXNzYWdlIiwicHJpbnRDb21waWxlVGltZU1lc3NhZ2UiLCJzdGF0IiwibGFzdFN0YXQiLCJidWlsdEF0IiwibmFtZSIsImVudHJ5TmFtZSIsImdyZWVuIiwiZXJyb3JzIiwibGVuZ3RoIiwicmVkIiwid2FybmluZ3MiLCJ5ZWxsb3ciLCJzeW1ib2wiLCJzdWNjZXNzIiwiZXJyb3IiLCJ3YXJuaW5nIiwibXNnIiwid2VicGFja1N0YXRUb0pzb25PcHRpb25zIiwidGltaW5ncyIsImFzc2V0cyIsImNhY2hlZCIsImNhY2hlZEFzc2V0cyIsImNoaWxkcmVuIiwiY2h1bmtNb2R1bGVzIiwiY2h1bmtPcmlnaW5zIiwiY2h1bmtzIiwiZW50cnlwb2ludHMiLCJlbnYiLCJtb2R1bGVzIiwicHVibGljUGF0aCIsImRlcHRoIiwicHJpbnRDb21waWxlVGltZU1lc3NhZ2VzIiwic3RhdHMiLCJsYXN0U3RhdHNKc29uIiwic3RhdHNKc29uIiwidG9Kc29uIiwiQXJyYXkiLCJpc0FycmF5IiwiZm9yRWFjaCIsInNqIiwiaW5kZXgiLCJwcmludFN1Y2Nlc3NmdWxseUNvbXBpbGVkTWVzc2FnZSIsInByaW50Q29tcGlsZWRXaXRoV2Fybk1lc3NhZ2UiLCJwcmludEZhaWxlZENvbXBpbGVNRXNzYWdlIiwicHJpbnRHZW5lcmFsSW5mb01lc3NhZ2UiLCJwcmludEVycm9ySGVhZGluZyIsImJnUmVkIiwiYmxhY2siLCJwcmludFdhcm5pbmdIZWFkaW5nIiwiYmdZZWxsb3ciLCJwcmludFN1Y2Nlc3NIZWFkaW5nIiwiYmdHcmVlbkJyaWdodCIsImhleCIsIndwYWNrTGluayIsIndwYWNrSW50cm8iLCJpc1lhcm4iLCJjd2QiLCJwcm9jZXNzIiwiZmluZFVwIiwic3luYyIsIl8iLCJjb250ZXh0SGVscCIsImVudHJpZXNIZWxwIiwicHJpbnRJbnRybyIsInJlc29sdmVDV0QiLCJvcHRpb25zIiwiY29udGV4dCIsImlzQWJzb2x1dGUiLCJzZXJ2ZXJJbmZvIiwidXJsIiwidWlVcmwiLCJzZXJ2ZUVudHJ5SW5mbyIsImVuZFNlcnZlSW5mbyIsInJlZEJyaWdodCIsImhlYXJ0Iiwic3RhciIsImVuZEJ1aWxkSW5mbyIsImVuZEJvb3RzdHJhcEluZm8iLCJwcmV0dHlQcmludEVycm9yIiwiZSIsImVycm9yTXNnIiwiZXJyb3JQcmVmaXgiLCJyZXBlYXQiLCJXcGFja2lvRXJyb3IiLCJtZXNzYWdlIiwicmVkdWNlIiwiYWNjIiwibGluZSIsInBlIiwiUHJldHR5RXJyb3IiLCJyZW5kZXIiLCJnZXRQcm9ncmVzc0JhciIsImRvbmUiLCJOdW1iZXIiLCJpc05hTiIsIkluZmluaXR5IiwicGJEb25lTGVuZ3RoIiwiTWF0aCIsImZsb29yIiwiZ0Z1bmMiLCJwYkRvbmUiLCJwYkRvaW5nIiwiZ3JheSIsInRvRml4ZWQiLCJnZXRGaWxlQ29weVByb2dyZXNzIiwicHJvZ3Jlc3MiLCJ0b3RhbEZpbGVzIiwiZmlsZXNEb25lIiwic2l6ZSIsInJvdW5kIiwiY29tcGxldGVkRmlsZXMiLCJjb21wbGV0ZWRTaXplIiwidG9TdHJpbmciLCJjeWFuIiwiZ2V0WmlwUHJvZ3Jlc3MiLCJkYXRhIiwiZW50cmllc1RvdGFsIiwiZW50cmllc1Byb2Nlc3NlZCIsImJ5dGVzVG90YWwiLCJieXRlc1Byb2Nlc3NlZCIsImVudHJpZXMiLCJ0b3RhbCIsInByb2Nlc3NlZCIsImZzIiwidG90YWxCeXRlcyIsInByb2Nlc3NlZEJ5dGVzIiwiZW5kUGFja0luZm8iLCJyZXN1bHRzIiwicmVsUGF0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7OztBQUdBLE1BQU1BLE9BQU8sR0FBR0MsY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLG9CQUF4QixDQUFoQixDLENBQ0E7OztBQUNBLE1BQU1DLEdBQUcsR0FBR0MsT0FBTyxDQUFDTCxPQUFELENBQW5COztBQUVPLE1BQU1NLFlBQVksR0FBR0MsZUFBTUMsT0FBTixDQUFjQyxpQkFBUUMsT0FBdEIsQ0FBckI7OztBQUVBLE1BQU1DLFlBQVksR0FBSTtBQUM3QixNQUFNTCxZQUFhLGFBQVlDLGVBQU1LLElBQU4sQ0FBV0MsSUFBWCxDQUFnQkMsU0FBaEIsQ0FDOUIsa0NBRDhCLENBRTdCO0FBQ0YsTUFBTVIsWUFBYSxvQkFBbUJDLGVBQU1LLElBQU4sQ0FBV0MsSUFBWCxDQUFnQkMsU0FBaEIsQ0FDckMsb0NBRHFDLENBRXBDO0FBQ0YsQ0FQTzs7QUFTUCxJQUFJQyxXQUEyQixHQUFHLElBQWxDO0FBRU8sTUFBTUMsU0FBUyxHQUFJLEdBQUVULGVBQU1LLElBQU4sQ0FBV0ssd0JBQVNDLFNBQVQsQ0FBb0IsWUFBcEIsQ0FBWCxDQUE2QztBQUN6RSxFQUFFWCxlQUFNSyxJQUFOLENBQVdLLHdCQUFTQyxTQUFULENBQW9CLGVBQXBCLENBQVgsQ0FBZ0QsSUFBR1gsZUFBTUssSUFBTixDQUNw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eEIsQ0FBZ0MsQ0FBaEMsQ0FEaUUsQ0FFaEUsR0FBRXZJLGVBQU11QixHQUFOLENBQVUsR0FBVixDQUFlLEdBQUV2QixlQUFNaUosSUFBTixDQUFXLENBQUNLLFVBQVUsR0FBRyxJQUFkLEVBQW9CZixPQUFwQixDQUE0QixDQUE1QixDQUFYLENBQTJDLEtBSmhFO0FBS0E7O0FBRU0sU0FBU3VCLFdBQVQsQ0FBcUJDLE9BQXJCLEVBQW9EO0FBQzFELFFBQU0vRyxHQUFHLEdBQUksR0FBRWhELGVBQU1tRixhQUFOLENBQW9CbkYsZUFBTUssSUFBTixDQUFXK0UsR0FBWCxDQUFlLFNBQWYsRUFBMEIsVUFBMUIsQ0FBcEIsQ0FBMkQ7QUFDM0U7QUFDQSxNQUFNckYsWUFBYSxrQkFBaUJDLGVBQU1NLElBQU4sQ0FBV3lKLE9BQU8sQ0FBQ0MsT0FBbkIsQ0FBNEI7QUFDaEUsTUFBTWpLLFlBQWEsZUFBY0MsZUFBTU0sSUFBTixDQUMvQixDQUFDeUosT0FBTyxDQUFDbkIsSUFBUixHQUFlLElBQWhCLEVBQXNCTCxPQUF0QixDQUE4QixDQUE5QixDQUQrQixDQUU5QjtBQUNIO0FBQ0EsRUFBRXhILGNBQWUsNEJBQTJCZixlQUFNc0MsS0FBTixDQUFZLFlBQVosQ0FBMEI7QUFDdEU7QUFDQSxzQkFBc0IrQyxTQUFVO0FBQ2hDLGdCQUFnQnJGLGVBQU15QyxHQUFOLENBQVV2QyxpQkFBUXdHLEtBQWxCLENBQXlCLFdBQVUxRyxlQUFNWSxZQUFOLENBQ2pEVixpQkFBUXlHLElBRHlDLENBRWhEO0FBQ0g7QUFDQSxFQUFFM0YsZ0JBQWlCLEVBZGxCO0FBZ0JBYyxFQUFBQSxPQUFPLENBQUNaLEdBQVIsQ0FBWThCLEdBQVo7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcmNoaXZlciBmcm9tICdhcmNoaXZlcic7XG5pbXBvcnQgY2hhbGsgZnJvbSAnY2hhbGsnO1xuaW1wb3J0IHsgUHJvZ3Jlc3NEYXRhIH0gZnJvbSAnY3B5JztcbmltcG9ydCBmaWd1cmVzIGZyb20gJ2ZpZ3VyZXMnO1xuaW1wb3J0IGZpbmRVcCBmcm9tICdmaW5kLXVwJztcbmltcG9ydCBncmFkaWVudCBmcm9tICdncmFkaWVudC1zdHJpbmcnO1xuaW1wb3J0IGxvZ1N5bWJvbHMgZnJvbSAnbG9nLXN5bWJvbHMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgUHJldHR5RXJyb3IgZnJvbSAncHJldHR5LWVycm9yJztcbmltcG9ydCB3ZWJwYWNrIGZyb20gJ3dlYnBhY2snO1xuaW1wb3J0IHsgV3BhY2tpb0Vycm9yIH0gZnJvbSAnLi4vZXJyb3JzL1dwYWNraW9FcnJvcic7XG5pbXBvcnQgeyBBcmNoaXZlUmVzb2x2ZSB9IGZyb20gJy4uL3NjcmlwdHMvUGFjayc7XG5cbmNvbnN0IHBrZ1BhdGggPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vLi4vcGFja2FnZS5qc29uJyk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xuY29uc3QgcGtnID0gcmVxdWlyZShwa2dQYXRoKTtcblxuZXhwb3J0IGNvbnN0IGJ1bGxldFN5bWJvbCA9IGNoYWxrLm1hZ2VudGEoZmlndXJlcy5wb2ludGVyKTtcblxuZXhwb3J0IGNvbnN0IGRvbmF0aW9uTGluayA9IGBcbiAgICAke2J1bGxldFN5bWJvbH0gUEFUUkVPTjogJHtjaGFsay5ib2xkLmJsdWUudW5kZXJsaW5lKFxuXHQnaHR0cHM6Ly93d3cucGF0cmVvbi5jb20vc3dhc2hhdGEnXG4pfVxuICAgICR7YnVsbGV0U3ltYm9sfSBPUEVOQ09MTEVDVElWRTogJHtjaGFsay5ib2xkLmJsdWUudW5kZXJsaW5lKFxuXHQnaHR0cHM6Ly9vcGVuY29sbGVjdGl2ZS5jb20vd3BhY2tpbydcbil9XG5gO1xuXG5sZXQgaXNZYXJuQ2FjaGU6IGJvb2xlYW4gfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGNvbnN0IHdwYWNrTG9nbyA9IGAke2NoYWxrLmJvbGQoZ3JhZGllbnQuaW5zdGFncmFtKGBfXyAgICAgIF9fYCkpfVxuJHtjaGFsay5ib2xkKGdyYWRpZW50Lmluc3RhZ3JhbShgXFxcXCBcXFxcIC9cXFxcIC8gL2ApKX0gJHtjaGFsay5ib2xkKFxuXHRncmFkaWVudC5pbnN0YWdyYW0oJ1BBQ0suSU8nKVxuKX1cbiR7Y2hhbGsuYm9sZChncmFkaWVudC5pbnN0YWdyYW0oYCBcXFxcIFYgIFYgL2ApKX0gICR7Y2hhbGsuYm9sZC55ZWxsb3dCcmlnaHQoXG5cdCdKYXZhU2NyaXB0J1xuKX0gdG9vbGluZyBmb3IgJHtjaGFsay5ib2xkLmJsdWVCcmlnaHQoJ1dvcmRQcmVzcycpfVxuJHtjaGFsay5ib2xkKGdyYWRpZW50Lmluc3RhZ3JhbShgICBcXFxcXy9cXFxcXy9gKSl9ICAgJHtjaGFsay5tYWdlbnRhKFxuXHQndidcbil9JHtjaGFsay5ib2xkLm1hZ2VudGEoYCR7cGtnLnZlcnNpb259YCl9YDtcblxuZXhwb3J0IGNvbnN0IHdwYWNrTG9nb1NtYWxsID0gZ3JhZGllbnQuaW5zdGFncmFtKCd3cGFjay5pbycpO1xuXG5leHBvcnQgY29uc3QgZG9uYXRpb25TZW50ZW5jZSA9IGBJZiAke3dwYWNrTG9nb1NtYWxsfSBpcyB3b3J0aHksIPCfmY8gY29uc2lkZXIgZG9uYXRpbmcuXG4ke2RvbmF0aW9uTGlua31cbkV2ZXJ5IGFtb3VudCBjb3VudHMuYDtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFRpbWVTdGFtcFRvTG9nKGxvZzogc3RyaW5nKTogc3RyaW5nIHtcblx0Y29uc3QgdGltZSA9IG5ldyBEYXRlKCkudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXTtcblx0cmV0dXJuIGAke2NoYWxrLmRpbShg772iJHt3cGFja0xvZ29TbWFsbH0gJHt0aW1lfe+9o2ApfSAke2xvZ31gO1xufVxuXG5leHBvcnQgY29uc3Qgd2F0Y2hTeW1ib2wgPSBgJHtsb2dTeW1ib2xzLmluZm99YDtcbmV4cG9ydCBjb25zdCB3YXRjaEVsbGlwc2lzID0gY2hhbGsuZGltKGZpZ3VyZXMuZWxsaXBzaXMpO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRXYXRjaGluZ01lc3NhZ2UoKSB7XG5cdGNvbnNvbGUubG9nKFxuXHRcdGFkZFRpbWVTdGFtcFRvTG9nKGAke3dhdGNoU3ltYm9sfSB3YXRjaGluZyBmb3IgY2hhbmdlcyR7d2F0Y2hFbGxpcHNpc31gKVxuXHQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRDb21waWxpbmdNZXNzYWdlKCkge1xuXHRjb25zb2xlLmxvZyhcblx0XHRhZGRUaW1lU3RhbXBUb0xvZyhgJHtsb2dTeW1ib2xzLmluZm99IGNvbXBpbGluZyBjaGFuZ2VzJHt3YXRjaEVsbGlwc2lzfWApXG5cdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludENvbXBpbGVUaW1lTWVzc2FnZShzdGF0OiBhbnksIGxhc3RTdGF0OiBhbnkgfCBudWxsKSB7XG5cdC8vIHNhZmV0eVxuXHRpZiAoIXN0YXQgfHwgdHlwZW9mIHN0YXQgIT09ICdvYmplY3QnIHx8ICFzdGF0LmJ1aWx0QXQpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRpZiAoXG5cdFx0bGFzdFN0YXQgPT09IG51bGwgfHxcblx0XHR0eXBlb2YgbGFzdFN0YXQgIT09ICdvYmplY3QnIHx8XG5cdFx0IWxhc3RTdGF0LmJ1aWx0QXQgfHxcblx0XHRzdGF0LmJ1aWx0QXQgIT09IGxhc3RTdGF0LmJ1aWx0QXRcblx0KSB7XG5cdFx0Ly8gZ2V0IGJ1bmRsZSBuYW1lXG5cdFx0bGV0IG5hbWUgPSAnJztcblx0XHRpZiAoc3RhdC5uYW1lKSB7XG5cdFx0XHRjb25zdCBlbnRyeU5hbWUgPSBzdGF0Lm5hbWU7XG5cdFx0XHRuYW1lID0gY2hhbGsuZ3JlZW4oZW50cnlOYW1lKTtcblx0XHRcdGlmIChzdGF0LmVycm9ycy5sZW5ndGgpIHtcblx0XHRcdFx0bmFtZSA9IGNoYWxrLnJlZChlbnRyeU5hbWUpO1xuXHRcdFx0fSBlbHNlIGlmIChzdGF0Lndhcm5pbmdzLmxlbmd0aCkge1xuXHRcdFx0XHRuYW1lID0gY2hhbGsueWVsbG93KGVudHJ5TmFtZSk7XG5cdFx0XHR9XG5cdFx0XHRuYW1lID0gYFske25hbWV9XSBgO1xuXHRcdH1cblxuXHRcdC8vIGdldCBsb2cgc3ltYm9sXG5cdFx0bGV0IHN5bWJvbCA9IGxvZ1N5bWJvbHMuc3VjY2Vzcztcblx0XHRpZiAoc3RhdC5lcnJvcnMubGVuZ3RoKSB7XG5cdFx0XHRzeW1ib2wgPSBsb2dTeW1ib2xzLmVycm9yO1xuXHRcdH0gZWxzZSBpZiAoc3RhdC53YXJuaW5ncy5sZW5ndGgpIHtcblx0XHRcdHN5bWJvbCA9IGxvZ1N5bWJvbHMud2FybmluZztcblx0XHR9XG5cblx0XHQvLyBnZXQgbG9nIG1lc3NhZ2Vcblx0XHRsZXQgbXNnID0gJ3dhcyByZWJ1aWx0IGluJztcblx0XHRpZiAobGFzdFN0YXQgPT09IG51bGwpIHtcblx0XHRcdG1zZyA9ICd3YXMgYnVpbHQgaW4nO1xuXHRcdH1cblxuXHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0YWRkVGltZVN0YW1wVG9Mb2coXG5cdFx0XHRcdGAke3N5bWJvbH0gJHtuYW1lfWJ1bmRsZSAke21zZ30gJHtjaGFsay5tYWdlbnRhKGAke3N0YXQudGltZX1tc2ApfS5gXG5cdFx0XHQpXG5cdFx0KTtcblx0fVxufVxuXG5leHBvcnQgY29uc3Qgd2VicGFja1N0YXRUb0pzb25PcHRpb25zOiB3ZWJwYWNrLlN0YXRzLlRvSnNvbk9wdGlvbnMgPSB7XG5cdHRpbWluZ3M6IHRydWUsXG5cdGFzc2V0czogZmFsc2UsXG5cdGJ1aWx0QXQ6IHRydWUsXG5cdGNhY2hlZDogZmFsc2UsXG5cdGNhY2hlZEFzc2V0czogZmFsc2UsXG5cdGNoaWxkcmVuOiB0cnVlLFxuXHRjaHVua01vZHVsZXM6IGZhbHNlLFxuXHRjaHVua09yaWdpbnM6IGZhbHNlLFxuXHRjaHVua3M6IGZhbHNlLFxuXHRlbnRyeXBvaW50czogZmFsc2UsXG5cdGVudjogZmFsc2UsXG5cdGVycm9yczogdHJ1ZSxcblx0d2FybmluZ3M6IHRydWUsXG5cdG1vZHVsZXM6IGZhbHNlLFxuXHRwdWJsaWNQYXRoOiBmYWxzZSxcblx0ZGVwdGg6IGZhbHNlLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50Q29tcGlsZVRpbWVNZXNzYWdlcyhcblx0c3RhdHM6IHdlYnBhY2suU3RhdHMsXG5cdGxhc3RTdGF0c0pzb246IGFueSB8IG51bGxcbikge1xuXHRsZXQgc3RhdHNKc29uOiBhbnkgfCBudWxsID0gbnVsbDtcblx0aWYgKHN0YXRzKSB7XG5cdFx0c3RhdHNKc29uID0gc3RhdHMudG9Kc29uKHdlYnBhY2tTdGF0VG9Kc29uT3B0aW9ucyk7XG5cdH1cblxuXHRpZiAoXG5cdFx0c3RhdHNKc29uICE9PSBudWxsICYmXG5cdFx0IXN0YXRzSnNvbi50aW1lICYmXG5cdFx0c3RhdHNKc29uLmNoaWxkcmVuICYmXG5cdFx0QXJyYXkuaXNBcnJheShzdGF0c0pzb24uY2hpbGRyZW4pXG5cdCkge1xuXHRcdC8vIGlmIGl0IGlzIG11bHRpY29tcGlsZXJcblx0XHRzdGF0c0pzb24uY2hpbGRyZW4uZm9yRWFjaCgoc2o6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuXHRcdFx0aWYgKGxhc3RTdGF0c0pzb24gPT09IG51bGwpIHtcblx0XHRcdFx0cHJpbnRDb21waWxlVGltZU1lc3NhZ2Uoc2osIG51bGwpO1xuXHRcdFx0fSBlbHNlIGlmIChcblx0XHRcdFx0bGFzdFN0YXRzSnNvbiAhPT0gbnVsbCAmJlxuXHRcdFx0XHRsYXN0U3RhdHNKc29uLmNoaWxkcmVuICYmXG5cdFx0XHRcdEFycmF5LmlzQXJyYXkobGFzdFN0YXRzSnNvbi5jaGlsZHJlbilcblx0XHRcdCkge1xuXHRcdFx0XHRwcmludENvbXBpbGVUaW1lTWVzc2FnZShzaiwgbGFzdFN0YXRzSnNvbi5jaGlsZHJlbltpbmRleF0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9IGVsc2UgaWYgKHN0YXRzSnNvbi50aW1lKSB7XG5cdFx0Ly8gaWYgaXQgaXMgc2luZ2xlIGNvbXBpbGVyXG5cdFx0aWYgKGxhc3RTdGF0c0pzb24gPT09IG51bGwpIHtcblx0XHRcdHByaW50Q29tcGlsZVRpbWVNZXNzYWdlKHN0YXRzSnNvbiwgbnVsbCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHByaW50Q29tcGlsZVRpbWVNZXNzYWdlKHN0YXRzSnNvbiwgbGFzdFN0YXRzSnNvbik7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludFN1Y2Nlc3NmdWxseUNvbXBpbGVkTWVzc2FnZSgpIHtcblx0Y29uc29sZS5sb2coYWRkVGltZVN0YW1wVG9Mb2coYCR7bG9nU3ltYm9scy5zdWNjZXNzfSBjb21waWxlZCBzdWNjZXNzZnVsbHlgKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludENvbXBpbGVkV2l0aFdhcm5NZXNzYWdlKCkge1xuXHRjb25zb2xlLmxvZyhcblx0XHRhZGRUaW1lU3RhbXBUb0xvZyhcblx0XHRcdGAke2xvZ1N5bWJvbHMud2FybmluZ30gJHtjaGFsay5kaW0oJ2NvbXBpbGVkIHdpdGggd2FybmluZ3MuLi4nKX1gXG5cdFx0KVxuXHQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRGYWlsZWRDb21waWxlTUVzc2FnZSgpIHtcblx0Y29uc29sZS5lcnJvcihcblx0XHRhZGRUaW1lU3RhbXBUb0xvZyhgJHtsb2dTeW1ib2xzLmVycm9yfSAke2NoYWxrLmRpbSgnZmFpbGVkIHRvIGNvbXBpbGUnKX1gKVxuXHQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRHZW5lcmFsSW5mb01lc3NhZ2UobXNnOiBzdHJpbmcsIHN5bWJvbD86IHN0cmluZykge1xuXHRpZiAodHlwZW9mIHN5bWJvbCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cblx0XHRzeW1ib2wgPSBsb2dTeW1ib2xzLmluZm87XG5cdH1cblx0Y29uc29sZS5pbmZvKGFkZFRpbWVTdGFtcFRvTG9nKGAke3N5bWJvbH0gJHttc2d9YCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRFcnJvckhlYWRpbmcobXNnOiBzdHJpbmcgPSAnRVJST1InKTogdm9pZCB7XG5cdGNvbnNvbGUubG9nKCcnKTtcblx0Y29uc29sZS5sb2coYCR7Y2hhbGsuYmdSZWQuYmxhY2soYCAke21zZ30gYCl9IHBsZWFzZSByZXZpZXdgKTtcblx0Y29uc29sZS5sb2coJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRXYXJuaW5nSGVhZGluZyhtc2c6IHN0cmluZyA9ICdXQVJOSU5HJyk6IHZvaWQge1xuXHRjb25zb2xlLmxvZygnJyk7XG5cdGNvbnNvbGUubG9nKGAke2NoYWxrLmJnWWVsbG93LmJsYWNrKGAgJHttc2d9IGApfSBwbGVhc2UgcmV2aWV3YCk7XG5cdGNvbnNvbGUubG9nKCcnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50U3VjY2Vzc0hlYWRpbmcobXNnOiBzdHJpbmcgPSAnT1VUUFVUJyk6IHZvaWQge1xuXHRjb25zb2xlLmxvZygnJyk7XG5cdGNvbnNvbGUubG9nKGAke2NoYWxrLmJnR3JlZW5CcmlnaHQoY2hhbGsuYm9sZC5oZXgoJyMwMDAwMDAnKShgICR7bXNnfSBgKSl9YCk7XG5cdGNvbnNvbGUubG9nKCcnKTtcbn1cblxuZXhwb3J0IGNvbnN0IHdwYWNrTGluayA9IGAke2NoYWxrLmJsdWUudW5kZXJsaW5lKCdodHRwczovL3dwYWNrLmlvJyl9YDtcblxuZXhwb3J0IGNvbnN0IHdwYWNrSW50cm8gPSBgJHt3cGFja0xvZ299XFxuYDtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzWWFybigpOiBib29sZWFuIHtcblx0Y29uc3QgY3dkID0gcHJvY2Vzcy5jd2QoKTtcblx0aWYgKGlzWWFybkNhY2hlICE9PSBudWxsKSB7XG5cdFx0cmV0dXJuIGlzWWFybkNhY2hlO1xuXHR9XG5cdHRyeSB7XG5cdFx0aXNZYXJuQ2FjaGUgPSBmaW5kVXAuc3luYygneWFybi5sb2NrJywgeyBjd2QgfSkgIT0gbnVsbDtcblxuXHRcdHJldHVybiBpc1lhcm5DYWNoZTtcblx0fSBjYXRjaCAoXykge1xuXHRcdGlzWWFybkNhY2hlID0gZmFsc2U7XG5cblx0XHRyZXR1cm4gaXNZYXJuQ2FjaGU7XG5cdH1cbn1cblxuZXhwb3J0IGNvbnN0IGNvbnRleHRIZWxwOiBzdHJpbmcgPSBgUGF0aCB0byBjb250ZXh0IG9yIHByb2plY3Qgcm9vdCBkaXJlY3RvcnkuIERlZmF1bHRzIHRvIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkuIEl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSBhYnNvbHV0ZSBwYXRoLCBlbHNlIGl0IGlzIGNhbGN1bGF0ZWQgZnJvbSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5LiBUaGUgcGF0aCB5b3UgbWVudGlvbiBoZXJlIHNob3VsZCBiZSB3aGF0IHRoZSBVUkwgJ2xvY2FsaG9zdC93cC1jb250ZW50Lzx0aGVtZXN8cGx1Z2lucz4vPHNsdWc+LycgbWFwIHRvLiBJbiBtb3N0IGNhc2VzLCB5b3Ugc2hvdWxkIGxlYXZlIGl0LCBiZWNhdXNlIGNhbGxpbmcgdGhlIHByb2dyYW0gZnJvbSBucG0gb3IgeWFybiBzY3JpcHQgc2hvdWxkIGF1dG9tYXRpY2FsbHkgc2V0IGl0LmA7XG5leHBvcnQgY29uc3QgZW50cmllc0hlbHA6IHN0cmluZyA9IGBTZWxlY3QgZW50cmllcyBmcm9tIHdwYWNraW8ucHJvamVjdC5qcyBmaWxlIGZvciB3aGljaCB3ZSBzdGFydCB0aGUgc2VydmVyLiBFaXRoZXIgMCBiYXNlZCBpbmRleCBvZiB0aGUgZW50cnksIGxpa2UgXFxgLWUgMCAyXFxgIHdpbGwgc3RhcnQgdGhlIDB0aCBhbmQgMm5kIGVudHJ5IG9mIHdwYWNraW8gcHJvamVjdC4gWW91IGNhbiBhbHNvIHN1cHBseSB0aGUgbmFtZSBvZiB0aGUgZW50cmllcywgbGlrZSBcXGAtZSBhcHAgYWRtaW5cXGAuIFRoZSB0b29sIHdpbGwgc2VhcmNoIHdwYWNraW8gZm9yIGVudHJpZXMgd2l0aCBuYW1lIHNldCB0byBhcHAgYW5kIGFkbWluLiBJZiBmb3VuZCwgaXQgd2lsbCBzdGFydCB0aGVtLmA7XG5leHBvcnQgZnVuY3Rpb24gcHJpbnRJbnRybygpOiB2b2lkIHtcblx0Y29uc29sZS5sb2cod3BhY2tJbnRybyk7XG59XG5cbi8qKlxuICogUmVzb2x2ZSBgY3dkYCwgYS5rLmEsIGN1cnJlbnQgd29ya2luZyBkaXJlY3Rvcnkgb3IgY29udGV4dCBmcm9tIHVzZXIgaW5wdXQuXG4gKiBJdCB0YWtlcyBpbnRvIGFjY291bnQgdGhlIGAtLWNvbnRleHQgW3BhdGhdYCBvcHRpb24gZnJvbSBDTEkgYW5kIHVzZXMgcHJvY2Vzc1xuICogY3dkLCBpZiBub3QgcHJvdmlkZWQuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBhcyByZWNlaXZlZCBmcm9tIENMSVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUNXRChcblx0b3B0aW9uczogeyBjb250ZXh0Pzogc3RyaW5nIHwgdW5kZWZpbmVkIH0gfCB1bmRlZmluZWRcbik6IHN0cmluZyB7XG5cdGxldCBjd2QgPSBwcm9jZXNzLmN3ZCgpO1xuXHQvLyBJZiB1c2VyIGhhcyBwcm92aWRlZCBjd2QsIHRoZW4gdXNlIHRoYXQgaW5zdGVhZFxuXHRpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNvbnRleHQpIHtcblx0XHRjb25zdCB7IGNvbnRleHQgfSA9IG9wdGlvbnM7XG5cdFx0aWYgKHBhdGguaXNBYnNvbHV0ZShvcHRpb25zLmNvbnRleHQpKSB7XG5cdFx0XHRjd2QgPSBjb250ZXh0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjd2QgPSBwYXRoLnJlc29sdmUoY3dkLCBjb250ZXh0KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY3dkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VydmVySW5mbyh1cmw6IHN0cmluZywgdWlVcmw6IHN0cmluZyB8IGJvb2xlYW4pOiB2b2lkIHtcblx0Y29uc3QgbXNnID0gYCR7bG9nU3ltYm9scy5zdWNjZXNzfSAke3dwYWNrTG9nb1NtYWxsfSBzZXJ2ZXIgaXMgcnVubmluZyBhdC5cblxuICAgICR7YnVsbGV0U3ltYm9sfSAke2NoYWxrLmJsdWUudW5kZXJsaW5lKHVybCl9XG5cbmFuZCBCcm93c2VyU3luYyBVSSBydW5uaW5nIGF0XG5cbiAgICAke2J1bGxldFN5bWJvbH0gJHtcblx0XHR0eXBlb2YgdWlVcmwgPT09ICdzdHJpbmcnID8gY2hhbGsuYmx1ZS51bmRlcmxpbmUodWlVcmwpIDogY2hhbGsucmVkKCdOL0EnKVxuXHR9XG5cblByZXNzICR7Y2hhbGsueWVsbG93KCdyJyl9IHRvIHJlY29tcGlsZSBhbmQgJHtjaGFsay55ZWxsb3coJ3EnKX0gdG8gZm9yY2UgcXVpdC5cblRvIGNyZWF0ZSBwcm9kdWN0aW9uIGJ1aWxkLCBydW5cblxuICAgICR7YnVsbGV0U3ltYm9sfSAke2NoYWxrLnllbGxvdyhpc1lhcm4oKSA/ICd5YXJuIGJ1aWxkJyA6ICducG0gcnVuIGJ1aWxkJyl9XG5cbiR7Y2hhbGsuZGltKCdObyBmaWxlcyBhcmUgd3JpdHRlbiBvbiBkaXNrIGR1cmluZyBkZXZlbG9wbWVudCBtb2RlLicpfWA7XG5cblx0Y29uc29sZS5sb2cobXNnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlcnZlRW50cnlJbmZvKCkge1xuXHRjb25zdCBtc2cgPSBgJHtcblx0XHRsb2dTeW1ib2xzLmluZm9cblx0fSB5b3UgY2FuIGFsc28gc3RhcnQgc2VsZWN0aXZlIGVudHJpZXMgYnkgcnVubmluZ1xuXG4gICAgJHtidWxsZXRTeW1ib2x9ICR7Y2hhbGsueWVsbG93KFxuXHRcdGlzWWFybigpID8gJ3lhcm4gc3RhcnQgLWUgMCAxJyA6ICducG0gcnVuIHN0YXJ0IC1lIDAgMSdcblx0KX1cbmA7XG5cdGNvbnNvbGUubG9nKG1zZyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmRTZXJ2ZUluZm8oKTogdm9pZCB7XG5cdGNvbnN0IG1zZyA9IGAke1xuXHRcdGxvZ1N5bWJvbHMuc3VjY2Vzc1xuXHR9ICR7d3BhY2tMb2dvU21hbGx9IHNlcnZlciBoYXMgYmVlbiAke2NoYWxrLnJlZEJyaWdodCgnc3RvcHBlZCcpfS5cblRvIGNyZWF0ZSBwcm9kdWN0aW9uIGJ1aWxkLCBydW5cblxuICAgICR7YnVsbGV0U3ltYm9sfSAke2NoYWxrLnllbGxvdyhpc1lhcm4oKSA/ICd5YXJuIGJ1aWxkJyA6ICducG0gcnVuIGJ1aWxkJyl9LlxuXG5UaGFuayB5b3UgZm9yIHVzaW5nICR7d3BhY2tMaW5rfS5cblRvIHNwcmVhZCB0aGUgJHtjaGFsay5yZWQoZmlndXJlcy5oZWFydCl9IHBsZWFzZSAke2NoYWxrLnllbGxvd0JyaWdodChcblx0XHRmaWd1cmVzLnN0YXJcblx0KX0gb3VyIHJlcG8gYW5kIHR3ZWV0LlxuXG4ke2RvbmF0aW9uU2VudGVuY2V9YDtcblxuXHRjb25zb2xlLmxvZyhtc2cpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5kQnVpbGRJbmZvKCk6IHZvaWQge1xuXHRjb25zdCBtc2cgPSBgJHt3cGFja0xvZ29TbWFsbH0gcHJvZHVjdGlvbiBidWlsZCB3YXMgJHtjaGFsay5ncmVlbihcblx0XHQnc3VjY2Vzc2Z1bCdcblx0KX0uXG5cbkFsbCBmaWxlcyB3ZXJlIHdyaXR0ZW4gdG8gZGlzayBhbmQgeW91IGNhbiB2aXNpdCB5b3VyIGxvY2FsIHNlcnZlci5cblxuSWYgeW91ciBmaWxlc2l6ZSBpcyB0b28gbGFyZ2UsIHJlbWVtYmVyIHlvdSBjYW4gdXNlIGFkdmFuY2VkXG5keW5hbWljIGltcG9ydCBhbmQgbXVsdGlwbGUgZW50cnktcG9pbnRzIGVhc2lseSB3aXRoICR7d3BhY2tMb2dvU21hbGx9LlxuXG4gICAgJHtidWxsZXRTeW1ib2x9IEZvciBtb3JlIGluZm8sIHZpc2l0OiAke3dwYWNrTGlua30uXG5cblRvIHNwcmVhZCB0aGUgJHtjaGFsay5yZWQoZmlndXJlcy5oZWFydCl9IHBsZWFzZSAke2NoYWxrLnllbGxvd0JyaWdodChcblx0XHRmaWd1cmVzLnN0YXJcblx0KX0gb3VyIHJlcG8gYW5kIHR3ZWV0LlxuXG4ke2RvbmF0aW9uU2VudGVuY2V9YDtcblxuXHRjb25zb2xlLmxvZyhtc2cpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5kQm9vdHN0cmFwSW5mbygpOiB2b2lkIHtcblx0Y29uc3QgbXNnID0gYCR7d3BhY2tMb2dvU21hbGx9IHdhcyAke2NoYWxrLmdyZWVuKFxuXHRcdCdzdWNjZXNzZnVsbHknXG5cdCl9IGludGVncmF0ZWQgd2l0aGluIHlvdXIgcHJvamVjdC5cblxuSWYgdGhpcyBpcyB5b3VyIGZpcnN0IHJ1biBlZGl0IHlvdXIgJHtjaGFsay5ib2xkLm1hZ2VudGEoXG5cdFx0J3dwYWNraW8ucHJvamVjdC5qcydcblx0KX0gZmlsZSBhbmQgcHV0XG5lbnRyeXBvaW50cy4gWW91IHdpbGwgZmluZCBleGFtcGxlcyB3aXRoaW4gdGhlIGZpbGUgaXRzZWxmLlxuXG5Zb3Ugc2hvdWxkIGtlZXAgJHtjaGFsay5ib2xkLnllbGxvdyhcblx0XHQnd3BhY2tpby5zZXJ2ZXIuanMnXG5cdCl9IG91dHNpZGUgeW91ciBWQ1MgdHJhY2tpbmdcbmFzIGl0IHdpbGwgbW9zdCBsaWtlbHkgZGlmZmVyIGZvciBkaWZmZXJlbnQgdXNlcnMuXG5cbllvdSBjYW4gcnVuICR7Y2hhbGsuZGltKCdib290c3RyYXAnKX0gY29tbWFuZCBhZ2FpbiBhbmQgaXQgd2lsbCBjcmVhdGUgdGhlXG4ke2NoYWxrLmJvbGQueWVsbG93KCd3cGFja2lvLnNlcnZlci5qcycpfSBmaWxlIGlmIG5vdCBwcmVzZW50LlxuXG4gICAgJHtidWxsZXRTeW1ib2x9IFN0YXJ0IERldmVsb3BtZW50OiAke2NoYWxrLnllbGxvdyhcblx0XHRpc1lhcm4oKSA/ICd5YXJuIHN0YXJ0JyA6ICducG0gc3RhcnQnXG5cdCl9LlxuICAgICR7YnVsbGV0U3ltYm9sfSBQcm9kdWN0aW9uIEJ1aWxkOiAke2NoYWxrLnllbGxvdyhcblx0XHRpc1lhcm4oKSA/ICd5YXJuIGJ1aWxkJyA6ICducG0gcnVuIGJ1aWxkJ1xuXHQpfS5cbiAgICAke2J1bGxldFN5bWJvbH0gQ3JlYXRlIGxvY2FsIHNlcnZlciBjb25maWc6ICR7Y2hhbGsueWVsbG93KFxuXHRcdGlzWWFybigpID8gJ3lhcm4gYm9vdHN0cmFwJyA6ICducG0gcnVuIGJvb3RzdHJhcCdcblx0KX0uXG4gICAgJHtidWxsZXRTeW1ib2x9IENyZWF0ZSBkaXN0cmlidXRhYmxlIHppcDogJHtjaGFsay55ZWxsb3coXG5cdFx0aXNZYXJuKCkgPyAneWFybiBhcmNoaXZlJyA6ICducG0gcnVuIGFyY2hpdmUnXG5cdCl9LlxuICAgICR7YnVsbGV0U3ltYm9sfSBGb3IgbW9yZSBpbmZvLCB2aXNpdDogJHt3cGFja0xpbmt9LlxuXG5UbyBlbnF1ZXVlIHRoZSBhc3NldHMgd2l0aGluIHlvdXIgcGx1Z2luIG9yIHRoZW1lLCBtYWtlIHN1cmUgeW91XG5oYXZlICR7Y2hhbGsueWVsbG93KCd3cGFja2lvL2VucXVldWUnKX0gcGFja2FnZSBmcm9tIHBhY2thZ2lzdC5vcmcvY29tcG9zZXJcbmFuZCBmb2xsb3cgdGhlIGludHJ1Y3Rpb25zIGZyb20gZG9jdW1lbnRhdGlvbi4gVG8gaW5zdGFsbCBub3csIHJ1blxuXG4gICAgJHtidWxsZXRTeW1ib2x9ICR7Y2hhbGsueWVsbG93KCdjb21wb3NlciByZXF1aXJlIHdwYWNraW8vZW5xdWV1ZScpfS5cblxuVG8gc3ByZWFkIHRoZSAke2NoYWxrLnJlZChmaWd1cmVzLmhlYXJ0KX0gcGxlYXNlICR7Y2hhbGsueWVsbG93QnJpZ2h0KFxuXHRcdGZpZ3VyZXMuc3RhclxuXHQpfSBvdXIgcmVwbyBhbmQgdHdlZXQuYDtcblxuXHRjb25zb2xlLmxvZyhtc2cpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJldHR5UHJpbnRFcnJvcihcblx0ZTogRXJyb3IgfCBXcGFja2lvRXJyb3IsXG5cdGVycm9yTXNnOiBzdHJpbmdcbik6IHZvaWQge1xuXHRjb25zdCBlcnJvclByZWZpeCA9IGAgICR7Y2hhbGsuZGltLnJlZChmaWd1cmVzLnBvaW50ZXIpfSAgYDtcblx0Y29uc29sZS5sb2coY2hhbGsuZGltKCc9Jy5yZXBlYXQoZXJyb3JNc2cubGVuZ3RoICsgMikpKTtcblx0Y29uc29sZS5sb2coYCR7bG9nU3ltYm9scy5lcnJvcn0gJHtlcnJvck1zZ31gKTtcblx0Y29uc29sZS5sb2coY2hhbGsuZGltKCc9Jy5yZXBlYXQoZXJyb3JNc2cubGVuZ3RoICsgMikpKTtcblx0Y29uc29sZS5sb2coJycpO1xuXHRpZiAoZSBpbnN0YW5jZW9mIFdwYWNraW9FcnJvcikge1xuXHRcdGNvbnNvbGUubG9nKGNoYWxrLmJnUmVkLmJsYWNrKCcgcGxlYXNlIHJldmlldyB0aGUgZm9sbG93aW5nIGVycm9ycyAnKSk7XG5cdFx0Y29uc29sZS5sb2coJycpO1xuXHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRlcnJvclByZWZpeCArXG5cdFx0XHRcdGUubWVzc2FnZVxuXHRcdFx0XHRcdC5zcGxpdCgnXFxuJylcblx0XHRcdFx0XHQucmVkdWNlKChhY2MsIGxpbmUpID0+IGAke2FjY31cXG4ke2Vycm9yUHJlZml4fSR7bGluZX1gKVxuXHRcdCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgcGUgPSBuZXcgUHJldHR5RXJyb3IoKTtcblx0XHRjb25zb2xlLmVycm9yKHBlLnJlbmRlcihlKSk7XG5cdH1cblx0Y29uc29sZS5sb2coJ1xcblxcblxcbicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvZ3Jlc3NCYXIoZG9uZTogbnVtYmVyKTogc3RyaW5nIHtcblx0aWYgKE51bWJlci5pc05hTihkb25lKSB8fCBkb25lID09PSBJbmZpbml0eSB8fCBkb25lID09PSAtSW5maW5pdHkpIHtcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cblx0XHRkb25lID0gMDtcblx0fVxuXHRjb25zdCBwYkRvbmVMZW5ndGggPSBNYXRoLmZsb29yKChkb25lIC8gMTAwKSAqIDIwKTtcblxuXHRsZXQgZ0Z1bmMgPSBncmFkaWVudCgncmVkJywgJ3JlZCcpO1xuXHRpZiAocGJEb25lTGVuZ3RoID49IDUpIHtcblx0XHRnRnVuYyA9IGdyYWRpZW50KCdyZWQnLCAncmVkJywgJ3llbGxvdycpO1xuXHR9XG5cdGlmIChwYkRvbmVMZW5ndGggPj0gMTApIHtcblx0XHRnRnVuYyA9IGdyYWRpZW50KCdyZWQnLCAncmVkJywgJ3llbGxvdycsICd5ZWxsb3cnKTtcblx0fVxuXHRpZiAocGJEb25lTGVuZ3RoID49IDE1KSB7XG5cdFx0Z0Z1bmMgPSBncmFkaWVudCgncmVkJywgJ3JlZCcsICd5ZWxsb3cnLCAneWVsbG93JywgJ2dyZWVuJyk7XG5cdH1cblxuXHRjb25zdCBwYkRvbmUgPSBnRnVuYygnPScucmVwZWF0KHBiRG9uZUxlbmd0aCkpO1xuXHRjb25zdCBwYkRvaW5nID0gY2hhbGsuZ3JheSgnLScucmVwZWF0KDIwIC0gcGJEb25lTGVuZ3RoKSk7XG5cdHJldHVybiBgWyR7cGJEb25lfSR7cGJEb2luZ31dICR7Y2hhbGsueWVsbG93KGRvbmUudG9GaXhlZCgyKSl9JWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlQ29weVByb2dyZXNzKHByb2dyZXNzPzogUHJvZ3Jlc3NEYXRhKTogc3RyaW5nIHtcblx0bGV0IGRvbmUgPSAwO1xuXHRsZXQgdG90YWxGaWxlcyA9IDA7XG5cdGxldCBmaWxlc0RvbmUgPSAwO1xuXHRsZXQgc2l6ZSA9IDA7XG5cdGlmIChwcm9ncmVzcykge1xuXHRcdGRvbmUgPSBNYXRoLnJvdW5kKChwcm9ncmVzcy5jb21wbGV0ZWRGaWxlcyAvIHByb2dyZXNzLnRvdGFsRmlsZXMpICogMTAwKTtcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblx0XHR0b3RhbEZpbGVzID0gcHJvZ3Jlc3MudG90YWxGaWxlcztcblx0XHRmaWxlc0RvbmUgPSBwcm9ncmVzcy5jb21wbGV0ZWRGaWxlcztcblx0XHRzaXplID0gcHJvZ3Jlc3MuY29tcGxldGVkU2l6ZTtcblx0fVxuXG5cdHJldHVybiBgY29weWluZyBmaWxlcyAke2dldFByb2dyZXNzQmFyKGRvbmUpfSAke2NoYWxrLm1hZ2VudGEoXG5cdFx0ZmlsZXNEb25lLnRvU3RyaW5nKClcblx0KX0ke2NoYWxrLmRpbSgnLycpfSR7Y2hhbGsuY3lhbih0b3RhbEZpbGVzLnRvU3RyaW5nKCkpfSBGaWxlcyAke2NoYWxrLmJsdWUoXG5cdFx0KHNpemUgLyAxMDI0KS50b0ZpeGVkKDIpXG5cdCl9IEtCYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFppcFByb2dyZXNzKGRhdGE/OiBhcmNoaXZlci5Qcm9ncmVzc0RhdGEpOiBzdHJpbmcge1xuXHRsZXQgZW50cmllc1RvdGFsID0gMDtcblx0bGV0IGVudHJpZXNQcm9jZXNzZWQgPSAwO1xuXHRsZXQgYnl0ZXNUb3RhbCA9IDA7XG5cdGxldCBieXRlc1Byb2Nlc3NlZCA9IDA7XG5cdGlmIChkYXRhKSB7XG5cdFx0ZW50cmllc1RvdGFsID0gZGF0YS5lbnRyaWVzLnRvdGFsO1xuXHRcdGVudHJpZXNQcm9jZXNzZWQgPSBkYXRhLmVudHJpZXMucHJvY2Vzc2VkO1xuXHRcdGJ5dGVzVG90YWwgPSBkYXRhLmZzLnRvdGFsQnl0ZXM7XG5cdFx0Ynl0ZXNQcm9jZXNzZWQgPSBkYXRhLmZzLnByb2Nlc3NlZEJ5dGVzO1xuXHR9XG5cdGNvbnN0IGRvbmUgPSBNYXRoLnJvdW5kKChlbnRyaWVzUHJvY2Vzc2VkIC8gZW50cmllc1RvdGFsKSAqIDEwMCk7XG5cdHJldHVybiBgY3JlYXRpbmcgemlwICR7Z2V0UHJvZ3Jlc3NCYXIoZG9uZSl9ICR7Y2hhbGsubWFnZW50YShcblx0XHRlbnRyaWVzUHJvY2Vzc2VkLnRvU3RyaW5nKClcblx0KX0ke2NoYWxrLmRpbSgnLycpfSR7Y2hhbGsuY3lhbihlbnRyaWVzVG90YWwudG9TdHJpbmcoKSl9IEZpbGVzICR7Y2hhbGsuYmx1ZShcblx0XHQoYnl0ZXNQcm9jZXNzZWQgLyAxMDI0KS50b0ZpeGVkKDIpXG5cdCl9JHtjaGFsay5kaW0oJy8nKX0ke2NoYWxrLmN5YW4oKGJ5dGVzVG90YWwgLyAxMDI0KS50b0ZpeGVkKDIpKX0gS0JgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5kUGFja0luZm8ocmVzdWx0czogQXJjaGl2ZVJlc29sdmUpOiB2b2lkIHtcblx0Y29uc3QgbXNnID0gYCR7Y2hhbGsuYmdHcmVlbkJyaWdodChjaGFsay5ib2xkLmhleCgnIzAwMDAwMCcpKCcgT1VUUFVUICcpKX1cblxuICAgICR7YnVsbGV0U3ltYm9sfSBaaXAgTG9jYXRpb246ICR7Y2hhbGsuYmx1ZShyZXN1bHRzLnJlbFBhdGgpfS5cbiAgICAke2J1bGxldFN5bWJvbH0gRmlsZSBTaXplOiAke2NoYWxrLmJsdWUoXG5cdFx0KHJlc3VsdHMuc2l6ZSAvIDEwMjQpLnRvRml4ZWQoMilcblx0KX0gS0IuXG5cbiR7d3BhY2tMb2dvU21hbGx9IHBhY2thZ2UgYW5kIGFyY2hpdmUgd2FzICR7Y2hhbGsuZ3JlZW4oJ3N1Y2Nlc3NmdWwnKX0uXG5cblRoYW5rIHlvdSBmb3IgdXNpbmcgJHt3cGFja0xpbmt9LlxuVG8gc3ByZWFkIHRoZSAke2NoYWxrLnJlZChmaWd1cmVzLmhlYXJ0KX0gcGxlYXNlICR7Y2hhbGsueWVsbG93QnJpZ2h0KFxuXHRcdGZpZ3VyZXMuc3RhclxuXHQpfSBvdXIgcmVwbyBhbmQgdHdlZXQuXG5cbiR7ZG9uYXRpb25TZW50ZW5jZX1gO1xuXG5cdGNvbnNvbGUubG9nKG1zZyk7XG59XG4iXX0=