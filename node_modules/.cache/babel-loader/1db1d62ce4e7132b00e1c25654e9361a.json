{"ast":null,"code":"import throttle from './utils/throttle';\nimport ProductCarousels from './product-carousels';\nimport BlogCarousels from './blog-carousels';\n\n(function () {\n  document.addEventListener('DOMContentLoaded', function () {\n    const contents = document.querySelector('.single-post__sidebar .elementor-toc__header');\n    const beforeContentsElement = document.querySelector('.single-post__sidebar .single-post__sidebar-author-meta');\n    const downBtn = document.querySelector('.single-post__sidebar .elementor-toc__toggle-button--expand');\n    const upBtn = document.querySelector('.single-post__sidebar .elementor-toc__toggle-button--collapse');\n    const elementsToIgnore = document.querySelectorAll('.single-post__author-image, .single-post__author-name, .single-post__sidebar-author-meta');\n\n    if (contents && upBtn && downBtn) {\n      window.addEventListener('scroll', throttle(e => {\n        if (e.target !== document) {\n          return false;\n        }\n\n        const beforeContentsRect = beforeContentsElement.getBoundingClientRect();\n        if (window.innerWidth < 992) return false;\n\n        if (beforeContentsRect.top + beforeContentsRect.height - 88 <= 0) {\n          upBtn.click();\n        } else {\n          downBtn.click();\n        }\n      }), 200);\n    }\n\n    const commentCount = document.querySelector('.title-comments');\n    const comments = document.querySelector('#comments');\n\n    if (comments && !comments.querySelector('.comment-list')) {\n      const noCommentText = document.createElement('p');\n      noCommentText.textContent = 'Be the first to comment!';\n      noCommentText.className = 'first-to-comment';\n      comments.appendChild(noCommentText);\n    }\n\n    if (commentCount) {\n      const count = commentCount.textContent.split(' ')[0];\n      commentCount.innerHTML = `<span class=\"title-comments__count\">${count}</span> Comments`;\n    }\n\n    let quantityValue = 0;\n    document.addEventListener('focusin', function (e) {\n      const el = e.target;\n\n      if (el.matches('.xoo-wsc-qty')) {\n        quantityValue = +el.value;\n      }\n    });\n    document.addEventListener('focusout', function (e) {\n      const el = e.target;\n\n      if (el.matches('.xoo-wsc-qty')) {\n        updateCartCount(+el.value - quantityValue);\n        quantityValue = 0;\n      }\n    });\n    const shopNav = document.querySelector('.header-main__nav-items--shop');\n    const headerMain = document.querySelector('.header-main');\n    const cartCss = document.querySelector('#xoo-wsc-style-inline-css');\n    const cartCssContent = cartCss.textContent;\n\n    function stickSideCart() {\n      let yPos = 0;\n\n      if (innerWidth < 992) {\n        yPos = headerMain.getBoundingClientRect().height;\n      } else {\n        yPos = shopNav.getBoundingClientRect().top + shopNav.getBoundingClientRect().height;\n      }\n\n      cartCss.textContent = cartCssContent + ' .xoo-wsc-container { top: ' + yPos + 'px !important; }\t.xoo-wsc-modal .xoo-wsc-opac {top: ' + yPos + 'px !important; }';\n    }\n\n    window.addEventListener('scroll', throttle(stickSideCart, 200));\n    setTimeout(function () {\n      document.querySelector('.header-main__search-wrapper .dgwt-wcas-search-wrapp').style['animation-duration'] = '.4s';\n    }, 500);\n    const productForm = document.querySelector('.variations_form.cart');\n\n    if (productForm) {\n      const productSelect = productForm.querySelector('select#type');\n\n      if (productSelect) {\n        const productFormButton = productForm.querySelector('.single_add_to_cart_button');\n        const googlePlayLink = document.createElement('a');\n        googlePlayLink.href = 'https://play.google.com/store/books/details/The_Van_Conversion_Bible_The_Ultimate_Guide_to_Con?id=egIrEAAAQBAJ';\n        googlePlayLink.className = 'elementor-button button--ebook';\n        googlePlayLink.style.textTransform = 'uppercase';\n        googlePlayLink.style.marginLeft = '10px';\n        googlePlayLink.textContent = 'Buy from Google Play';\n        googlePlayLink.target = '_blank';\n\n        function toggleAmazonBtn(onLoad) {\n          if (!onLoad) {\n            productFormButton.style.display = 'none';\n          }\n\n          const amazonLink = document.createElement('a');\n          amazonLink.className = 'elementor-button button--ebook';\n          amazonLink.style.textTransform = 'uppercase';\n          amazonLink.style.marginLeft = '10px';\n          amazonLink.textContent = 'Buy from Amazon';\n          amazonLink.target = '_blank';\n\n          if (!productForm.querySelector('.button--ebook')) {\n            // if (window.CUSTOMER_LOCATION === 'america') {\n            // \tamazonLink.href = 'https://www.amazon.com/dp/1800493983';\n            // \tproductFormButton.style.display = 'none';\n            // \tproductFormButton.parentNode.appendChild(amazonLink);\n            // }\n            if (window.CUSTOMER_LOCATION === 'canada') {\n              amazonLink.href = 'https://www.amazon.ca/Van-Conversion-Bible-Converting-Campervan/dp/1800493983';\n              productFormButton.style.display = 'none';\n              productFormButton.parentNode.appendChild(amazonLink);\n            }\n          }\n        }\n\n        toggleAmazonBtn(true);\n        productSelect.addEventListener('change', function (e) {\n          if (window.CUSTOMER_LOCATION === 'unknown') {\n            return false;\n          }\n\n          if (e.target.value === 'Ebook') {\n            if (window.CUSTOMER_LOCATION === 'europe') {\n              productFormButton.parentNode.appendChild(googlePlayLink);\n              productFormButton.style.display = 'none';\n            } else {\n              productFormButton.style.display = 'block';\n              Array.from(productForm.querySelectorAll('.button--ebook')).forEach(button => button.remove());\n            }\n          } else if (e.target.value === 'Hardback book') {\n            toggleAmazonBtn();\n\n            if (window.CUSTOMER_LOCATION === 'europe') {\n              productFormButton.style.display = 'block';\n              Array.from(productForm.querySelectorAll('.button--ebook')).forEach(button => button.remove());\n            }\n          }\n        });\n      }\n    }\n\n    Array.from(document.querySelectorAll('.header-main__nav > .header-main__nav-items > .header-main__nav-item, .header-main__nav > .header-main__nav-items > .header-main__nomadic')).forEach(function (el, i) {\n      if (!i) return;\n      el.addEventListener('mouseenter', throttle(e => {\n        document.body.classList.add('shade');\n        document.querySelector('html').classList.add('shade');\n      }, 100));\n      el.addEventListener('mouseleave', throttle(e => {\n        if (searchOpen) {\n          return false;\n        }\n\n        document.body.classList.remove('shade');\n        document.querySelector('html').classList.remove('shade');\n      }, 100));\n    });\n    new ProductCarousels().init();\n    new BlogCarousels().init();\n    const ecologiImage = document.querySelector('.header-main__ecologi-image');\n\n    if (ecologiImage) {\n      fetch('https://public.ecologi.com/users/climbingvan/impact').then(response => response.json()).then(data => {\n        const text = document.createElement('div');\n        text.innerHTML = `<span class=\"trees\">${data.trees.toLocaleString()}</span>` + ' trees planted';\n        text.className = 'header-main__ecologi-image__text';\n        ecologiImage.appendChild(text);\n      });\n    }\n\n    const searchInputs = Array.from(document.querySelectorAll('.dgwt-wcas-search-input'));\n\n    function handleSearchIcons(e) {\n      if (e.target.value) {\n        e.target.parentNode.classList.add('has-value');\n      } else {\n        e.target.parentNode.classList.remove('has-value');\n      }\n    }\n\n    function handleEbookEU() {\n      const euCountries = ['AT', 'BE', 'BG', 'CZ', 'CY', 'DE', 'DK', 'EE', 'ES', 'FI', 'FR', 'GR', 'HR', 'HU', 'IE', 'IT', 'LT', 'LU', 'LV', 'MT', 'NL', 'PL', 'PT', 'RO', 'SE', 'SI', 'SK'];\n\n      if (euCountries.includes(jQuery('select[name=billing_country]').val())) {\n        const hasEbookInCart = document.querySelector('.product-name [alt*=\"ebook\"]');\n\n        if (hasEbookInCart) {\n          const removeLink = hasEbookInCart.parentNode.querySelector('#remove-link');\n          location.href = removeLink.href + '&remove_ebook=1';\n        }\n      }\n    } // handleEbookEU();\n\n\n    jQuery(function ($) {\n      $(document.body).on('change', 'select[name=billing_country]', handleEbookEU);\n    });\n\n    if (searchInputs.length) {\n      searchInputs.forEach(input => input.addEventListener('input', handleSearchIcons));\n      searchInputs.forEach(input => input.addEventListener('blur', handleSearchIcons));\n    }\n\n    const quantityInput = document.querySelector('.cart_item .qty');\n\n    if (quantityInput) {\n      quantityInput.addEventListener('blur', function (e) {\n        if (innerWidth > 767) {\n          return;\n        }\n\n        const button = e.target.parentNode.nextElementSibling;\n        button.click();\n      });\n    }\n\n    if (toastr) {\n      toastr.options.timeOut = 10000; // How long the toast will display without user interaction\n\n      toastr.options.extendedTimeOut = 10000; // How long the toast will display after a user hovers over it\n    }\n\n    const freeShippingInput = document.querySelector('[value*=\"free_shipping\"]');\n\n    if (document.querySelector('.woocommerce-checkout') && freeShippingInput) {\n      document.addEventListener('change', function (e) {\n        if (e.target.matches('[value*=\"free_shipping\"]') && e.target.checked) {\n          toastr.info(window.LOCALISED_VARS.checkoutPopup);\n        }\n      });\n\n      if (freeShippingInput.checked || freeShippingInput && document.getElementById('shipping_method').children.length < 2) {\n        toastr.info(window.LOCALISED_VARS.checkoutPopup);\n      }\n    }\n\n    let menuOpen = false;\n    let searchOpen = false;\n    let cartOpen = false;\n\n    function updateCartCount(quantity) {\n      let replace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      const cartCounts = document.querySelectorAll('.cart-count');\n      cartCounts.forEach(function (el) {\n        const total = replace ? quantity : +el.textContent + quantity;\n        el.textContent = total;\n\n        if (!total) {\n          el.classList.add('hide');\n        } else {\n          el.classList.remove('hide');\n        }\n      });\n    }\n\n    document.addEventListener('click', function (e) {\n      const el = e.target;\n\n      if (el.matches('.remove')) {\n        const quantity = el.parentNode.previousElementSibling.querySelector('.qty');\n        updateCartCount(-quantity.value);\n      }\n\n      if (el.matches('.xoo-wsc-smr-del')) {\n        const quantity = el.parentNode.previousElementSibling.querySelector('.xoo-wsc-qty');\n        updateCartCount(-quantity.value);\n      }\n\n      if (el.matches('[name=\"update_cart\"]')) {\n        const quantity = Array.from(document.querySelectorAll('.product-quantity .qty')).reduce(function (total, input) {\n          return total + +input.value;\n        }, 0);\n        updateCartCount(quantity, true);\n      }\n\n      if (el.matches('.single_add_to_cart_button')) {\n        const quantity = el.previousElementSibling.querySelector('.qty');\n        updateCartCount(+quantity.value);\n      }\n\n      if (el.matches('.xoo-wsc-opac')) {\n        document.querySelector('.xoo-wsch-close').click('.xoo-wsc-cart-trigger');\n      }\n\n      if (el.matches('.xoo-wsc-cart-trigger') || el.parentNode && el.parentNode.matches('.xoo-wsc-cart-trigger')) {\n        if (cartOpen) {\n          document.querySelector('.xoo-wsch-close').click();\n        }\n\n        cartOpen = !cartOpen;\n\n        if (cartOpen) {\n          return stickSideCart();\n        }\n      }\n\n      if (el.matches('.header-main__search')) {\n        document.body.classList.toggle('shade');\n        document.querySelector('html').classList.toggle('shade');\n        document.querySelector('.header-main__search-mobile-wrapper input').focus();\n      }\n\n      if (el.matches('.header-main__search-btn')) {\n        document.querySelector('.header-main__nomadic').classList.toggle('hidden');\n        document.body.classList.toggle('shade');\n        document.querySelector('html').classList.toggle('shade');\n        document.querySelector('.header-main__search-wrapper').classList.toggle('open');\n\n        if (el.previousElementSibling.className.indexOf('open') > -1) {\n          searchOpen = true;\n          document.querySelector('.header-main__search-wrapper input').focus();\n          document.body.classList.add('search-open');\n        } else {\n          searchOpen = false;\n          document.body.classList.remove('search-open');\n        }\n      }\n\n      if (el.matches('#main-search')) {\n        document.querySelector('.header-main__search-mobile-wrapper').classList.toggle('open');\n\n        if (document.querySelector('.header-main__search-mobile-wrapper').className.indexOf('open') > -1) {\n          document.body.classList.add('search-open');\n          searchOpen = true;\n        } else {\n          document.querySelector('.dgwt-wcas-close').click();\n          document.body.classList.add('search-open');\n          searchOpen = false;\n        }\n      }\n\n      if (el.matches('.badge__link') || el.matches('[href^=\"https://www.cusrev.com/reviews]')) {\n        e.preventDefault();\n        return;\n      }\n\n      if (el.matches('.widgettitle')) {\n        el.parentNode.classList.toggle('closed');\n        el.classList.toggle('closed');\n\n        if (el.className.indexOf('closed') > -1) {\n          el.nextElementSibling.style.display = 'none';\n        } else {\n          el.nextElementSibling.style.display = 'block';\n        }\n      }\n\n      if (el.matches('#btn-filter')) {\n        const filters = document.querySelector('.category-filters');\n\n        if (innerWidth < 992) {\n          filters.classList.toggle('show');\n\n          if (filters.className.indexOf('show') > -1) {\n            el.textContent = 'Close';\n          } else {\n            el.textContent = 'Filter';\n          }\n        }\n      }\n\n      if (el.matches('[data-filter]')) {\n        const products = document.querySelector('.products');\n        const filters = document.querySelector('.category-filters');\n        products.innerHTML = '';\n\n        if (innerWidth < 992) {\n          filters.classList.remove('show');\n          document.querySelector('#btn-filter').textContent = 'Filters';\n        }\n      }\n\n      if (el.matches('.fa-bars')) {\n        menuOpen = !menuOpen;\n        jQuery('.header-main__nav').toggleClass('show');\n        document.body.classList.toggle('shade');\n        document.querySelector('html').classList.toggle('shade');\n        const shopNav = document.querySelector('.header-main__nav-items--shop');\n        const mainNav = document.querySelector('.header-main__nav-items:first-of-type');\n        shopNav.style.top = mainNav.getBoundingClientRect().height + 'px';\n        shopNav.style.transition = 'top 0s ease-in-out';\n        setTimeout(function () {\n          shopNav.style.transition = 'top 0.3s ease-in-out';\n        }, 50);\n      }\n\n      const isLinkChevron = el.matches('.fa-chevron-down') && el.parentNode.matches('.header-main__nav-link');\n\n      if (el.matches('.header-main__nav-link') || isLinkChevron) {\n        if (innerWidth >= 992) {\n          return;\n        }\n\n        const element = isLinkChevron ? el.parentNode : el;\n\n        if (!element.nextElementSibling || element.matches('.header-main__nav-item--parent')) {\n          return;\n        }\n\n        if (element.matches('.header-main__nav-link--book-large') || element.matches('.header-main__nav-link--list')) {\n          return;\n        }\n\n        e.preventDefault();\n        const subNav = element.nextElementSibling;\n        subNav.classList.add('active');\n        const backLink = document.createElement('button');\n        backLink.setAttribute('data-shop-btn', element.matches('.header-main__nav-link--shop'));\n        backLink.textContent = 'Back';\n        backLink.className = 'header-main__back';\n        const icon = document.createElement('i');\n        icon.className = 'fas fa-chevron-down';\n        backLink.prepend(icon);\n        subNav.append(backLink);\n\n        if (!element.matches('.header-main__nav-link--book-large')) {\n          const navItem = subNav.previousElementSibling.cloneNode(true);\n          navItem.classList.add('header-main__nav-item--parent');\n          subNav.prepend(navItem);\n        }\n\n        if (element.matches('.header-main__nav-link--shop')) {\n          return;\n        }\n\n        const mainNav = document.querySelector('.header-main__nav-items:first-of-type');\n        mainNav.style.height = backLink.getBoundingClientRect().height + backLink.getBoundingClientRect().top + 'px';\n        const shopNav = document.querySelector('.header-main__nav-items--shop');\n        shopNav.style.top = `calc(${backLink.getBoundingClientRect().height + backLink.getBoundingClientRect().top + 'px'} - 2rem)`;\n      }\n\n      if (el.matches('.header-main__back')) {\n        if (innerWidth >= 992) {\n          return;\n        }\n\n        e.preventDefault();\n        const subNav = el.parentNode;\n        subNav.classList.remove('active');\n        const parentNavItem = subNav.querySelector('.header-main__nav-item--parent');\n\n        if (parentNavItem) {\n          parentNavItem.remove();\n        }\n\n        const previousList = el.parentNode.parentNode.parentNode;\n        const lastItem = Array.from(previousList.children).pop();\n        el.remove();\n\n        if (el.getAttribute('data-shop-btn') === 'true') {\n          return;\n        }\n\n        const mainNav = document.querySelector('.header-main__nav-items:first-of-type');\n        mainNav.style.height = lastItem.getBoundingClientRect().height + lastItem.getBoundingClientRect().top + 'px';\n        const shopNav = document.querySelector('.header-main__nav-items--shop');\n        shopNav.style.top = `calc(${lastItem.getBoundingClientRect().height + lastItem.getBoundingClientRect().top + 'px'} - 2rem)`;\n      }\n\n      if (menuOpen && el.matches('body')) {\n        document.body.classList.remove('shade');\n        document.querySelector('html').classList.remove('shade');\n        document.querySelector('.header-main__nav').classList.remove('show');\n        menuOpen = false;\n      }\n\n      if (searchOpen && el.matches('body')) {\n        if (innerWidth >= 992) {\n          document.querySelector('.header-main__search-btn').click();\n        } else {\n          document.querySelector('.header-main__search').click();\n        }\n\n        searchOpen = false;\n      }\n    });\n    const filterSidebar = document.querySelector('.category-filters .elementor-column-wrap');\n    const footer = document.querySelector('[data-elementor-type=\"footer\"]');\n\n    if (filterSidebar) {\n      function getStickyHeights() {\n        return Array.from(document.querySelectorAll('.header-main__nav-items--shop')).reduce(function (total, el) {\n          return total + el.offsetHeight;\n        }, 0);\n      }\n\n      let stickyHeights = getStickyHeights();\n      let isSticky = false;\n      const categoryTitle = filterSidebar.querySelector('.category-title');\n\n      function stickyFilters() {\n        if (innerWidth < 992) {\n          return false;\n        }\n\n        stickyHeights = getStickyHeights();\n        const filterRect = filterSidebar.getBoundingClientRect();\n        filterSidebar.style.height = `calc(100vh - ${stickyHeights}px)`;\n\n        if (filterRect.top + categoryTitle.getBoundingClientRect().height <= stickyHeights) {\n          if (isSticky) {\n            return;\n          }\n\n          isSticky = true;\n          filterSidebar.style.position = 'sticky';\n          filterSidebar.style.top = stickyHeights + 'px';\n          filterSidebar.classList.add('sticky');\n          categoryTitle.style.display = 'none';\n        } else {\n          categoryTitle.style.display = 'block';\n\n          if (!isSticky) {\n            return;\n          }\n\n          isSticky = false;\n          filterSidebar.style.position = 'static';\n          filterSidebar.classList.remove('sticky');\n        }\n      }\n\n      stickyFilters();\n      window.addEventListener('scroll', throttle(stickyFilters, 50));\n    }\n\n    const products = document.querySelector('.products');\n    const helpBanner = document.querySelector('.help-banner');\n\n    if (products && !document.querySelector('.category-description')) {\n      if (innerWidth > 992) {\n        const productsWrapper = document.querySelector('.products-wrapper');\n        const elementorProductsWrapper = document.querySelector('.post-type-archive-product .elementor-widget-woocommerce-products');\n\n        if (elementorProductsWrapper) {\n          elementorProductsWrapper.style.marginTop = '-20px';\n        }\n\n        if (productsWrapper) {\n          document.querySelector('.products-wrapper').style.marginTop = '0';\n        }\n      }\n    }\n\n    if (products && helpBanner) {\n      let productIndex = 12;\n      let loading = false;\n      let showingHelpBanner = false;\n      products.style['grid-row-gap'] = 0;\n\n      function loadProducts() {\n        if (showingHelpBanner) {\n          return false;\n        }\n\n        if (productIndex > products.children.length) {\n          showingHelpBanner = true;\n          helpBanner.style.opacity = 1;\n          return false;\n        }\n\n        if (!loading && window.pageYOffset > document.documentElement.scrollHeight - window.innerHeight - footer.clientHeight - 300) {\n          loading = true;\n          productIndex += 12;\n          Array.from(products.children).slice(0, productIndex).forEach(function (product) {\n            product.classList.add('show');\n          });\n          loading = false; // reset value of loading once content loaded\n        }\n      }\n\n      window.addEventListener('scroll', throttle(loadProducts, 200));\n    }\n  }, false);\n})();\n\njQuery(document).ready(function ($) {\n  var activeMenu = null;\n  var activeSubMenu = null;\n  var ignoreClassesClicked = ['subnavigation-categories', 'subnavigation-category', 'header-subnavigation', 'header-main__nav-items', 'header-main__nav-item', 'header-main__nav-link', 'header-main', 'header-navigation', 'main-navigation-item'];\n  var mobileMenuOpen = false;\n  var initialWindowWidth = $(window).outerWidth();\n\n  function ClassClickedCanBeIgnored(target) {\n    for (var i = 0; i < ignoreClassesClicked.length; i++) {\n      if ($(target).hasClass(ignoreClassesClicked[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function displayShopSubMenuIfHomepage() {\n    var pathName = window.location.pathname;\n\n    if ((pathName == '/' || pathName.indexOf(\"product\") > -1 || pathName.indexOf(\"product-category\") > -1) && initialWindowWidth > 991) {\n      var shopLink = $('.main-navigation a.shop-menu-link');\n      shopLink.addClass(\"active\");\n      shopLink.parent('li').addClass(\"active\");\n      $(\".header-subnavigation\").removeClass('hide');\n      $(\".subnavigation-categories\").removeClass(\"hide\");\n      $(\"[data-elementor-type='header']\").addClass(\"menu-spacer\");\n      activeMenu = shopLink;\n    }\n  }\n\n  $(window).click(function (e) {\n    if (activeMenu == null && activeSubMenu == null) {\n      return;\n    }\n\n    var target = $(e.target);\n    var targetClassCanBeIgnored = ClassClickedCanBeIgnored(target);\n\n    if (activeMenu && target[0] != activeMenu[0] && activeSubMenu && target[0] != activeSubMenu[0] && targetClassCanBeIgnored) {\n      $('.header-subnavigation').addClass('hide');\n      $(\"[data-elementor-type='header']\").removeClass(\"menu-spacer\");\n      $(activeSubMenu).siblings(\"ul\").hide();\n      $(activeSubMenu).siblings(\".book-large\").hide();\n      activeMenu = null;\n      activeSubMenu = null;\n      $('.main-navigation li').removeClass(\"active\");\n      $(\".subnavigation-categories\").addClass(\"hide\");\n      $(\".header-main__nomadic-ad\").addClass(\"hide\");\n      $(\".main-navigation a\").removeClass(\"active\");\n    }\n\n    if (activeMenu != null && activeSubMenu == null && targetClassCanBeIgnored) {\n      if (target[0] != activeMenu[0]) {\n        $('.header-subnavigation').addClass('hide');\n        $('.main-navigation li').removeClass(\"active\");\n        $(\".main-navigation a\").removeClass(\"active\");\n        $(\"[data-elementor-type='header']\").removeClass(\"menu-spacer\");\n        activeMenu = null;\n      }\n    }\n\n    if (activeSubMenu != null && targetClassCanBeIgnored) {\n      if (target[0] != activeSubMenu[0]) {\n        $(activeSubMenu).siblings(\"ul\").hide();\n        activeSubMenu = null;\n      }\n    }\n  });\n  $('.main-navigation a').hover(function (e) {\n    $('.main-navigation li').removeClass(\"active\");\n    $(\".main-navigation a\").removeClass(\"active\");\n    $(\".header-subnavigation\").addClass('hide');\n    $(this).addClass(\"active\");\n\n    if ($(this).hasClass(\"shop-menu-link\")) {\n      e.preventDefault();\n      $(this).parent('li').addClass(\"active\");\n      $(\".header-subnavigation\").removeClass('hide');\n      $(\"#shopMenu\").removeClass(\"hide\");\n      $(\".header-main__nomadic-ad\").addClass(\"hide\");\n      $(\"[data-elementor-type='header']\").addClass(\"menu-spacer\");\n    }\n\n    if ($(this).hasClass(\"nomadic-energy-link\")) {\n      e.preventDefault();\n      $(this).parent('li').addClass(\"active\");\n      $(\".header-subnavigation\").removeClass('hide');\n      $(\".subnavigation-categories\").addClass(\"hide\");\n      $(\".header-main__nomadic-ad\").removeClass(\"hide\");\n    }\n\n    if ($(this).hasClass(\"van-conversion-menu-link\")) {\n      e.preventDefault();\n      $(this).parent('li').addClass(\"active\");\n      $(\".header-subnavigation\").removeClass('hide');\n      $(\".subnavigation-categories\").addClass(\"hide\");\n      $(\"#vanConversionMenu\").removeClass(\"hide\");\n    }\n\n    if ($(this).hasClass(\"van-life-menu-link\")) {\n      e.preventDefault();\n      $(this).parent('li').addClass(\"active\");\n      $(\".header-subnavigation\").removeClass('hide');\n      $(\".subnavigation-categories\").addClass(\"hide\");\n      $(\"#vanLifeMenu\").removeClass(\"hide\");\n    }\n\n    activeMenu = $(this);\n  });\n  $('.header-subnavigation .subnavigation-link').hover(function (e) {\n    e.preventDefault();\n\n    if (activeSubMenu != null) {\n      $(activeSubMenu).siblings(\"ul\").hide();\n      $(activeSubMenu).siblings(\".book-large\").hide();\n    }\n\n    if ($(this).hasClass('header-main__nav-link--book-large')) {\n      $(this).siblings(\".book-large\").css('display', 'block');\n    } else {\n      $(this).siblings(\"ul\").css('display', 'flex');\n    }\n\n    activeSubMenu = $(this);\n  });\n  $('.menu-switcher').click(function (e) {\n    e.preventDefault();\n    var target = $(\".header-navigation > .center-navigation > .search-bar\");\n    var isHidden = target.hasClass(\"hide\");\n\n    if ($(window).outerWidth() < 992) {\n      $('.main-menu > .header-main__search-mobile-wrapper').toggleClass('open');\n    } else {\n      if (isHidden) {\n        target.removeClass(\"hide\");\n        $('.main-navigation').addClass(\"hide\");\n        $('.main-navigation li').removeClass(\"active\");\n        $(this).removeClass(\"menu-mode\").addClass(\"search-mode\");\n      } else {\n        target.addClass(\"hide\");\n        $(\".main-navigation\").removeClass(\"hide\");\n        $(this).removeClass(\"search-mode\").addClass(\"menu-mode\");\n        setTimeout(function () {\n          displayShopSubMenuIfHomepage();\n        }, 100);\n      }\n    } //$(\".header-navigation > .search-bar\").removeClass('hide');\n\n  });\n  $('.mobile-menu-icon').click(function () {\n    mobileMenuOpen = !mobileMenuOpen;\n\n    if (mobileMenuOpen) {\n      $('.mobile-navigation').addClass(\"show\");\n      $('.main-menu > .header-main__search-mobile-wrapper').removeClass('open');\n    } else {\n      $('.mobile-navigation').removeClass(\"show\");\n      $('.main-menu > .header-main__search-mobile-wrapper').removeClass('open');\n    }\n  });\n\n  function showMobileNavigationIfMobileWidth() {\n    var width = $(window).outerWidth();\n\n    if (width > 991 && mobileMenuOpen) {\n      mobileMenuOpen = false;\n      $('.mobile-navigation').removeClass(\"show\");\n    }\n\n    if (width < 992 && activeMenu) {\n      $('.header-subnavigation').addClass('hide');\n      $(activeSubMenu).siblings(\"ul\").hide();\n      $(activeSubMenu).siblings(\".book-large\").hide();\n      activeMenu = null;\n      activeSubMenu = null;\n      $('.main-navigation li').removeClass(\"active\");\n      $(\".subnavigation-categories\").addClass(\"hide\");\n      $(\".header-main__nomadic-ad\").addClass(\"hide\");\n      $(\".main-navigation a\").removeClass(\"active\");\n    }\n\n    if (width < 992 & $('.menu-switcher').hasClass(\"search-mode\")) {\n      $(\".header-navigation > .center-navigation > .search-bar\").addClass('hide');\n      $('.menu-switcher').removeClass(\"search-mode\").addClass(\"menu-mode\");\n    }\n  }\n\n  $(window).resize(function () {\n    showMobileNavigationIfMobileWidth();\n  }); // If on homepage show shop subcategory\n\n  displayShopSubMenuIfHomepage();\n  $(\"input#keywordSearch\").keyup(function () {\n    if ($(this).val().length == 0) {\n      $('.header-navigation .search-bar .close').hide();\n      $('.header-navigation .search-bar .search').replaceWith('<i class=\"fas fa-search search\"></i>');\n    } else {\n      $('.header-navigation .search-bar .close').show();\n\n      if ($('.header-navigation .search-bar .search').hasClass('fa-spin')) {\n        $('.header-navigation .search-bar .search').replaceWith('<i class=\"fas fa-search search\"></i>');\n      }\n    }\n    /*if ($(this).val().length > 2) {\r\n    \t\r\n    \tvar valThis = this.value.toLowerCase();\r\n    \tvar length = this.value.length;\r\n    \t\t\t$('.objType').each(function () {\r\n            var text  = $(this).text(),\r\n                textL = text.toLowerCase(),\r\n                textStart = textL.indexOf(valThis),\r\n                textEnd = textStart+valThis.length;\r\n                //n = textL.indexOf(valThis);\r\n             var htmlR = text.substring(0,textStart)+'<b>' + text.substring(textStart,textEnd) + '</b>' + text.substring(textStart+length);\r\n            \r\n            if(textStart!=-1) {\r\n              $(\"#\"+this.id+\"r\").html(htmlR).show()\r\n            \t$(this).hide();\r\n            }\r\n            else {\r\n             $(\"#\"+this.id+\"r\").empty();\r\n            \t$(this).hide();\r\n            }\r\n        });\r\n    } else {\r\n    \t$(\"#datafetch\").hide();\r\n    }*/\n    //$('#datafetch').empty();\n\n  });\n  $('.header-navigation .search-bar .close').hide();\n  /*$('.header-navigation .search-bar .close').click(function() {\r\n  \t$('input#keywordSearch').val('');\r\n  \t$('#datafetch').hide().empty();\r\n  \t$(this).hide();\r\n  \t$('.header-navigation .search-bar .search').replaceWith('<i class=\"fas fa-search search\"></i>');\r\n  }); */\n});","map":{"version":3,"sources":["C:/Users/nikkw/Code/climbingvan/wp-content/themes/hello-theme-child/src/js/main.js"],"names":["throttle","ProductCarousels","BlogCarousels","document","addEventListener","contents","querySelector","beforeContentsElement","downBtn","upBtn","elementsToIgnore","querySelectorAll","window","e","target","beforeContentsRect","getBoundingClientRect","innerWidth","top","height","click","commentCount","comments","noCommentText","createElement","textContent","className","appendChild","count","split","innerHTML","quantityValue","el","matches","value","updateCartCount","shopNav","headerMain","cartCss","cartCssContent","stickSideCart","yPos","setTimeout","style","productForm","productSelect","productFormButton","googlePlayLink","href","textTransform","marginLeft","toggleAmazonBtn","onLoad","display","amazonLink","CUSTOMER_LOCATION","parentNode","Array","from","forEach","button","remove","i","body","classList","add","searchOpen","init","ecologiImage","fetch","then","response","json","data","text","trees","toLocaleString","searchInputs","handleSearchIcons","handleEbookEU","euCountries","includes","jQuery","val","hasEbookInCart","removeLink","location","$","on","length","input","quantityInput","nextElementSibling","toastr","options","timeOut","extendedTimeOut","freeShippingInput","checked","info","LOCALISED_VARS","checkoutPopup","getElementById","children","menuOpen","cartOpen","quantity","replace","cartCounts","total","previousElementSibling","reduce","toggle","focus","indexOf","preventDefault","filters","products","toggleClass","mainNav","transition","isLinkChevron","element","subNav","backLink","setAttribute","icon","prepend","append","navItem","cloneNode","parentNavItem","previousList","lastItem","pop","getAttribute","filterSidebar","footer","getStickyHeights","offsetHeight","stickyHeights","isSticky","categoryTitle","stickyFilters","filterRect","position","helpBanner","productsWrapper","elementorProductsWrapper","marginTop","productIndex","loading","showingHelpBanner","loadProducts","opacity","pageYOffset","documentElement","scrollHeight","innerHeight","clientHeight","slice","product","ready","activeMenu","activeSubMenu","ignoreClassesClicked","mobileMenuOpen","initialWindowWidth","outerWidth","ClassClickedCanBeIgnored","hasClass","displayShopSubMenuIfHomepage","pathName","pathname","shopLink","addClass","parent","removeClass","targetClassCanBeIgnored","siblings","hide","hover","css","isHidden","showMobileNavigationIfMobileWidth","width","resize","keyup","replaceWith","show"],"mappings":"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","sourcesContent":["import throttle from './utils/throttle';\r\nimport ProductCarousels from './product-carousels';\r\nimport BlogCarousels from './blog-carousels';\r\n\r\n(function () {\r\n\tdocument.addEventListener(\r\n\t\t'DOMContentLoaded',\r\n\t\tfunction () {\r\n\t\t\tconst contents = document.querySelector(\r\n\t\t\t\t'.single-post__sidebar .elementor-toc__header'\r\n\t\t\t);\r\n\t\t\tconst beforeContentsElement = document.querySelector(\r\n\t\t\t\t'.single-post__sidebar .single-post__sidebar-author-meta'\r\n\t\t\t);\r\n\t\t\tconst downBtn = document.querySelector(\r\n\t\t\t\t'.single-post__sidebar .elementor-toc__toggle-button--expand'\r\n\t\t\t);\r\n\t\t\tconst upBtn = document.querySelector(\r\n\t\t\t\t'.single-post__sidebar .elementor-toc__toggle-button--collapse'\r\n\t\t\t);\r\n\r\n\t\t\tconst elementsToIgnore = document.querySelectorAll(\r\n\t\t\t\t'.single-post__author-image, .single-post__author-name, .single-post__sidebar-author-meta'\r\n\t\t\t);\r\n\r\n\t\t\tif (contents && upBtn && downBtn) {\r\n\t\t\t\twindow.addEventListener(\r\n\t\t\t\t\t'scroll',\r\n\t\t\t\t\tthrottle((e) => {\r\n\t\t\t\t\t\tif (e.target !== document) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst beforeContentsRect =\r\n\t\t\t\t\t\t\tbeforeContentsElement.getBoundingClientRect();\r\n\t\t\t\t\t\tif (window.innerWidth < 992) return false;\r\n\t\t\t\t\t\tif (beforeContentsRect.top + beforeContentsRect.height - 88 <= 0) {\r\n\t\t\t\t\t\t\tupBtn.click();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdownBtn.click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t200\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tconst commentCount = document.querySelector('.title-comments');\r\n\t\t\tconst comments = document.querySelector('#comments');\r\n\r\n\t\t\tif (comments && !comments.querySelector('.comment-list')) {\r\n\t\t\t\tconst noCommentText = document.createElement('p');\r\n\t\t\t\tnoCommentText.textContent = 'Be the first to comment!';\r\n\t\t\t\tnoCommentText.className = 'first-to-comment';\r\n\t\t\t\tcomments.appendChild(noCommentText);\r\n\t\t\t}\r\n\r\n\t\t\tif (commentCount) {\r\n\t\t\t\tconst count = commentCount.textContent.split(' ')[0];\r\n\t\t\t\tcommentCount.innerHTML = `<span class=\"title-comments__count\">${count}</span> Comments`;\r\n\t\t\t}\r\n\r\n\t\t\tlet quantityValue = 0;\r\n\t\t\tdocument.addEventListener('focusin', function (e) {\r\n\t\t\t\tconst el = e.target;\r\n\t\t\t\tif (el.matches('.xoo-wsc-qty')) {\r\n\t\t\t\t\tquantityValue = +el.value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdocument.addEventListener('focusout', function (e) {\r\n\t\t\t\tconst el = e.target;\r\n\t\t\t\tif (el.matches('.xoo-wsc-qty')) {\r\n\t\t\t\t\tupdateCartCount(+el.value - quantityValue);\r\n\t\t\t\t\tquantityValue = 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst shopNav = document.querySelector('.header-main__nav-items--shop');\r\n\t\t\tconst headerMain = document.querySelector('.header-main');\r\n\t\t\tconst cartCss = document.querySelector('#xoo-wsc-style-inline-css');\r\n\t\t\tconst cartCssContent = cartCss.textContent;\r\n\r\n\t\t\tfunction stickSideCart() {\r\n\t\t\t\tlet yPos = 0;\r\n\t\t\t\tif (innerWidth < 992) {\r\n\t\t\t\t\tyPos = headerMain.getBoundingClientRect().height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tyPos =\r\n\t\t\t\t\t\tshopNav.getBoundingClientRect().top +\r\n\t\t\t\t\t\tshopNav.getBoundingClientRect().height;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcartCss.textContent =\r\n\t\t\t\t\tcartCssContent +\r\n\t\t\t\t\t' .xoo-wsc-container { top: ' +\r\n\t\t\t\t\tyPos +\r\n\t\t\t\t\t'px !important; }\t.xoo-wsc-modal .xoo-wsc-opac {top: ' +\r\n\t\t\t\t\tyPos +\r\n\t\t\t\t\t'px !important; }';\r\n\t\t\t}\r\n\r\n\t\t\twindow.addEventListener('scroll', throttle(stickSideCart, 200));\r\n\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tdocument.querySelector(\r\n\t\t\t\t\t'.header-main__search-wrapper .dgwt-wcas-search-wrapp'\r\n\t\t\t\t).style['animation-duration'] = '.4s';\r\n\t\t\t}, 500);\r\n\t\t\tconst productForm = document.querySelector('.variations_form.cart');\r\n\r\n\t\t\tif (productForm) {\r\n\t\t\t\tconst productSelect = productForm.querySelector('select#type');\r\n\t\t\t\tif (productSelect) {\r\n\t\t\t\t\tconst productFormButton = productForm.querySelector(\r\n\t\t\t\t\t\t'.single_add_to_cart_button'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tconst googlePlayLink = document.createElement('a');\r\n\t\t\t\t\tgooglePlayLink.href =\r\n\t\t\t\t\t\t'https://play.google.com/store/books/details/The_Van_Conversion_Bible_The_Ultimate_Guide_to_Con?id=egIrEAAAQBAJ';\r\n\t\t\t\t\tgooglePlayLink.className = 'elementor-button button--ebook';\r\n\t\t\t\t\tgooglePlayLink.style.textTransform = 'uppercase';\r\n\t\t\t\t\tgooglePlayLink.style.marginLeft = '10px';\r\n\t\t\t\t\tgooglePlayLink.textContent = 'Buy from Google Play';\r\n\t\t\t\t\tgooglePlayLink.target = '_blank';\r\n\r\n\t\t\t\t\tfunction toggleAmazonBtn(onLoad) {\r\n\t\t\t\t\t\tif (!onLoad) {\r\n\t\t\t\t\t\t\tproductFormButton.style.display = 'none';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst amazonLink = document.createElement('a');\r\n\t\t\t\t\t\tamazonLink.className = 'elementor-button button--ebook';\r\n\t\t\t\t\t\tamazonLink.style.textTransform = 'uppercase';\r\n\t\t\t\t\t\tamazonLink.style.marginLeft = '10px';\r\n\t\t\t\t\t\tamazonLink.textContent = 'Buy from Amazon';\r\n\t\t\t\t\t\tamazonLink.target = '_blank';\r\n\t\t\t\t\t\tif (!productForm.querySelector('.button--ebook')) {\r\n\t\t\t\t\t\t\t// if (window.CUSTOMER_LOCATION === 'america') {\r\n\t\t\t\t\t\t\t// \tamazonLink.href = 'https://www.amazon.com/dp/1800493983';\r\n\t\t\t\t\t\t\t// \tproductFormButton.style.display = 'none';\r\n\t\t\t\t\t\t\t// \tproductFormButton.parentNode.appendChild(amazonLink);\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\tif (window.CUSTOMER_LOCATION === 'canada') {\r\n\t\t\t\t\t\t\t\tamazonLink.href =\r\n\t\t\t\t\t\t\t\t\t'https://www.amazon.ca/Van-Conversion-Bible-Converting-Campervan/dp/1800493983';\r\n\t\t\t\t\t\t\t\tproductFormButton.style.display = 'none';\r\n\t\t\t\t\t\t\t\tproductFormButton.parentNode.appendChild(amazonLink);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttoggleAmazonBtn(true);\r\n\r\n\t\t\t\t\tproductSelect.addEventListener('change', function (e) {\r\n\t\t\t\t\t\tif (window.CUSTOMER_LOCATION === 'unknown') {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (e.target.value === 'Ebook') {\r\n\t\t\t\t\t\t\tif (window.CUSTOMER_LOCATION === 'europe') {\r\n\t\t\t\t\t\t\t\tproductFormButton.parentNode.appendChild(googlePlayLink);\r\n\t\t\t\t\t\t\t\tproductFormButton.style.display = 'none';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tproductFormButton.style.display = 'block';\r\n\t\t\t\t\t\t\t\tArray.from(\r\n\t\t\t\t\t\t\t\t\tproductForm.querySelectorAll('.button--ebook')\r\n\t\t\t\t\t\t\t\t).forEach((button) => button.remove());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (e.target.value === 'Hardback book') {\r\n\t\t\t\t\t\t\ttoggleAmazonBtn();\r\n\t\t\t\t\t\t\tif (window.CUSTOMER_LOCATION === 'europe') {\r\n\t\t\t\t\t\t\t\tproductFormButton.style.display = 'block';\r\n\t\t\t\t\t\t\t\tArray.from(\r\n\t\t\t\t\t\t\t\t\tproductForm.querySelectorAll('.button--ebook')\r\n\t\t\t\t\t\t\t\t).forEach((button) => button.remove());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tArray.from(\r\n\t\t\t\tdocument.querySelectorAll(\r\n\t\t\t\t\t'.header-main__nav > .header-main__nav-items > .header-main__nav-item, .header-main__nav > .header-main__nav-items > .header-main__nomadic'\r\n\t\t\t\t)\r\n\t\t\t).forEach(function (el, i) {\r\n\t\t\t\tif (!i) return;\r\n\t\t\t\tel.addEventListener(\r\n\t\t\t\t\t'mouseenter',\r\n\t\t\t\t\tthrottle((e) => {\r\n\t\t\t\t\t\tdocument.body.classList.add('shade');\r\n\t\t\t\t\t\tdocument.querySelector('html').classList.add('shade');\r\n\t\t\t\t\t}, 100)\r\n\t\t\t\t);\r\n\t\t\t\tel.addEventListener(\r\n\t\t\t\t\t'mouseleave',\r\n\t\t\t\t\tthrottle((e) => {\r\n\t\t\t\t\t\tif (searchOpen) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdocument.body.classList.remove('shade');\r\n\t\t\t\t\t\tdocument.querySelector('html').classList.remove('shade');\r\n\t\t\t\t\t}, 100)\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\tnew ProductCarousels().init();\r\n\t\t\tnew BlogCarousels().init();\r\n\t\t\tconst ecologiImage = document.querySelector(\r\n\t\t\t\t'.header-main__ecologi-image'\r\n\t\t\t);\r\n\t\t\tif (ecologiImage) {\r\n\t\t\t\tfetch('https://public.ecologi.com/users/climbingvan/impact')\r\n\t\t\t\t\t.then((response) => response.json())\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tconst text = document.createElement('div');\r\n\r\n\t\t\t\t\t\ttext.innerHTML =\r\n\t\t\t\t\t\t\t`<span class=\"trees\">${data.trees.toLocaleString()}</span>` +\r\n\t\t\t\t\t\t\t' trees planted';\r\n\r\n\t\t\t\t\t\ttext.className = 'header-main__ecologi-image__text';\r\n\r\n\t\t\t\t\t\tecologiImage.appendChild(text);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst searchInputs = Array.from(\r\n\t\t\t\tdocument.querySelectorAll('.dgwt-wcas-search-input')\r\n\t\t\t);\r\n\r\n\t\t\tfunction handleSearchIcons(e) {\r\n\t\t\t\tif (e.target.value) {\r\n\t\t\t\t\te.target.parentNode.classList.add('has-value');\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.target.parentNode.classList.remove('has-value');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleEbookEU() {\r\n\t\t\t\tconst euCountries = [\r\n\t\t\t\t\t'AT',\r\n\t\t\t\t\t'BE',\r\n\t\t\t\t\t'BG',\r\n\t\t\t\t\t'CZ',\r\n\t\t\t\t\t'CY',\r\n\t\t\t\t\t'DE',\r\n\t\t\t\t\t'DK',\r\n\t\t\t\t\t'EE',\r\n\t\t\t\t\t'ES',\r\n\t\t\t\t\t'FI',\r\n\t\t\t\t\t'FR',\r\n\t\t\t\t\t'GR',\r\n\t\t\t\t\t'HR',\r\n\t\t\t\t\t'HU',\r\n\t\t\t\t\t'IE',\r\n\t\t\t\t\t'IT',\r\n\t\t\t\t\t'LT',\r\n\t\t\t\t\t'LU',\r\n\t\t\t\t\t'LV',\r\n\t\t\t\t\t'MT',\r\n\t\t\t\t\t'NL',\r\n\t\t\t\t\t'PL',\r\n\t\t\t\t\t'PT',\r\n\t\t\t\t\t'RO',\r\n\t\t\t\t\t'SE',\r\n\t\t\t\t\t'SI',\r\n\t\t\t\t\t'SK',\r\n\t\t\t\t];\r\n\t\t\t\tif (\r\n\t\t\t\t\teuCountries.includes(jQuery('select[name=billing_country]').val())\r\n\t\t\t\t) {\r\n\t\t\t\t\tconst hasEbookInCart = document.querySelector(\r\n\t\t\t\t\t\t'.product-name [alt*=\"ebook\"]'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (hasEbookInCart) {\r\n\t\t\t\t\t\tconst removeLink =\r\n\t\t\t\t\t\t\thasEbookInCart.parentNode.querySelector('#remove-link');\r\n\t\t\t\t\t\tlocation.href = removeLink.href + '&remove_ebook=1';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// handleEbookEU();\r\n\t\t\tjQuery(function ($) {\r\n\t\t\t\t$(document.body).on(\r\n\t\t\t\t\t'change',\r\n\t\t\t\t\t'select[name=billing_country]',\r\n\t\t\t\t\thandleEbookEU\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t\tif (searchInputs.length) {\r\n\t\t\t\tsearchInputs.forEach((input) =>\r\n\t\t\t\t\tinput.addEventListener('input', handleSearchIcons)\r\n\t\t\t\t);\r\n\t\t\t\tsearchInputs.forEach((input) =>\r\n\t\t\t\t\tinput.addEventListener('blur', handleSearchIcons)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tconst quantityInput = document.querySelector('.cart_item .qty');\r\n\t\t\tif (quantityInput) {\r\n\t\t\t\tquantityInput.addEventListener('blur', function (e) {\r\n\t\t\t\t\tif (innerWidth > 767) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst button = e.target.parentNode.nextElementSibling;\r\n\r\n\t\t\t\t\tbutton.click();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (toastr) {\r\n\t\t\t\ttoastr.options.timeOut = 10000; // How long the toast will display without user interaction\r\n\t\t\t\ttoastr.options.extendedTimeOut = 10000; // How long the toast will display after a user hovers over it\r\n\t\t\t}\r\n\r\n\t\t\tconst freeShippingInput = document.querySelector(\r\n\t\t\t\t'[value*=\"free_shipping\"]'\r\n\t\t\t);\r\n\t\t\tif (\r\n\t\t\t\tdocument.querySelector('.woocommerce-checkout') &&\r\n\t\t\t\tfreeShippingInput\r\n\t\t\t) {\r\n\t\t\t\tdocument.addEventListener('change', function (e) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\te.target.matches('[value*=\"free_shipping\"]') &&\r\n\t\t\t\t\t\te.target.checked\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\ttoastr.info(window.LOCALISED_VARS.checkoutPopup);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (\r\n\t\t\t\t\tfreeShippingInput.checked ||\r\n\t\t\t\t\t(freeShippingInput &&\r\n\t\t\t\t\t\tdocument.getElementById('shipping_method').children.length < 2)\r\n\t\t\t\t) {\r\n\t\t\t\t\ttoastr.info(window.LOCALISED_VARS.checkoutPopup);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet menuOpen = false;\r\n\t\t\tlet searchOpen = false;\r\n\t\t\tlet cartOpen = false;\r\n\r\n\t\t\tfunction updateCartCount(quantity, replace = false) {\r\n\t\t\t\tconst cartCounts = document.querySelectorAll('.cart-count');\r\n\t\t\t\tcartCounts.forEach(function (el) {\r\n\t\t\t\t\tconst total = replace ? quantity : +el.textContent + quantity;\r\n\t\t\t\t\tel.textContent = total;\r\n\t\t\t\t\tif (!total) {\r\n\t\t\t\t\t\tel.classList.add('hide');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tel.classList.remove('hide');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdocument.addEventListener('click', function (e) {\r\n\t\t\t\tconst el = e.target;\r\n\r\n\t\t\t\tif (el.matches('.remove')) {\r\n\t\t\t\t\tconst quantity =\r\n\t\t\t\t\t\tel.parentNode.previousElementSibling.querySelector('.qty');\r\n\t\t\t\t\tupdateCartCount(-quantity.value);\r\n\t\t\t\t}\r\n\t\t\t\tif (el.matches('.xoo-wsc-smr-del')) {\r\n\t\t\t\t\tconst quantity =\r\n\t\t\t\t\t\tel.parentNode.previousElementSibling.querySelector('.xoo-wsc-qty');\r\n\t\t\t\t\tupdateCartCount(-quantity.value);\r\n\t\t\t\t}\r\n\t\t\t\tif (el.matches('[name=\"update_cart\"]')) {\r\n\t\t\t\t\tconst quantity = Array.from(\r\n\t\t\t\t\t\tdocument.querySelectorAll('.product-quantity .qty')\r\n\t\t\t\t\t).reduce(function (total, input) {\r\n\t\t\t\t\t\treturn total + +input.value;\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t\tupdateCartCount(quantity, true);\r\n\t\t\t\t}\r\n\t\t\t\tif (el.matches('.single_add_to_cart_button')) {\r\n\t\t\t\t\tconst quantity = el.previousElementSibling.querySelector('.qty');\r\n\r\n\t\t\t\t\tupdateCartCount(+quantity.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (el.matches('.xoo-wsc-opac')) {\r\n\t\t\t\t\tdocument\r\n\t\t\t\t\t\t.querySelector('.xoo-wsch-close')\r\n\t\t\t\t\t\t.click('.xoo-wsc-cart-trigger');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tel.matches('.xoo-wsc-cart-trigger') ||\r\n\t\t\t\t\t(el.parentNode && el.parentNode.matches('.xoo-wsc-cart-trigger'))\r\n\t\t\t\t) {\r\n\t\t\t\t\tif (cartOpen) {\r\n\t\t\t\t\t\tdocument.querySelector('.xoo-wsch-close').click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcartOpen = !cartOpen;\r\n\t\t\t\t\tif (cartOpen) {\r\n\t\t\t\t\t\treturn stickSideCart();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (el.matches('.header-main__search')) {\r\n\t\t\t\t\tdocument.body.classList.toggle('shade');\r\n\t\t\t\t\tdocument.querySelector('html').classList.toggle('shade');\r\n\t\t\t\t\tdocument\r\n\t\t\t\t\t\t.querySelector('.header-main__search-mobile-wrapper input')\r\n\t\t\t\t\t\t.focus();\r\n\t\t\t\t}\r\n\t\t\t\tif (el.matches('.header-main__search-btn')) {\r\n\t\t\t\t\tdocument\r\n\t\t\t\t\t\t.querySelector('.header-main__nomadic')\r\n\t\t\t\t\t\t.classList.toggle('hidden');\r\n\t\t\t\t\tdocument.body.classList.toggle('shade');\r\n\t\t\t\t\tdocument.querySelector('html').classList.toggle('shade');\r\n\r\n\t\t\t\t\tdocument\r\n\t\t\t\t\t\t.querySelector('.header-main__search-wrapper')\r\n\t\t\t\t\t\t.classList.toggle('open');\r\n\r\n\t\t\t\t\tif (el.previousElementSibling.className.indexOf('open') > -1) {\r\n\t\t\t\t\t\tsearchOpen = true;\r\n\t\t\t\t\t\tdocument\r\n\t\t\t\t\t\t\t.querySelector('.header-main__search-wrapper input')\r\n\t\t\t\t\t\t\t.focus();\r\n\t\t\t\t\t\tdocument.body.classList.add('search-open');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsearchOpen = false;\r\n\t\t\t\t\t\tdocument.body.classList.remove('search-open');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (el.matches('#main-search')) {\r\n\t\t\t\t\tdocument\r\n\t\t\t\t\t\t.querySelector('.header-main__search-mobile-wrapper')\r\n\t\t\t\t\t\t.classList.toggle('open');\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tdocument\r\n\t\t\t\t\t\t\t.querySelector('.header-main__search-mobile-wrapper')\r\n\t\t\t\t\t\t\t.className.indexOf('open') > -1\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tdocument.body.classList.add('search-open');\r\n\r\n\t\t\t\t\t\tsearchOpen = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.querySelector('.dgwt-wcas-close').click();\r\n\t\t\t\t\t\tdocument.body.classList.add('search-open');\r\n\t\t\t\t\t\tsearchOpen = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tel.matches('.badge__link') ||\r\n\t\t\t\t\tel.matches('[href^=\"https://www.cusrev.com/reviews]')\r\n\t\t\t\t) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (el.matches('.widgettitle')) {\r\n\t\t\t\t\tel.parentNode.classList.toggle('closed');\r\n\t\t\t\t\tel.classList.toggle('closed');\r\n\t\t\t\t\tif (el.className.indexOf('closed') > -1) {\r\n\t\t\t\t\t\tel.nextElementSibling.style.display = 'none';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tel.nextElementSibling.style.display = 'block';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (el.matches('#btn-filter')) {\r\n\t\t\t\t\tconst filters = document.querySelector('.category-filters');\r\n\t\t\t\t\tif (innerWidth < 992) {\r\n\t\t\t\t\t\tfilters.classList.toggle('show');\r\n\r\n\t\t\t\t\t\tif (filters.className.indexOf('show') > -1) {\r\n\t\t\t\t\t\t\tel.textContent = 'Close';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tel.textContent = 'Filter';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (el.matches('[data-filter]')) {\r\n\t\t\t\t\tconst products = document.querySelector('.products');\r\n\t\t\t\t\tconst filters = document.querySelector('.category-filters');\r\n\t\t\t\t\tproducts.innerHTML = '';\r\n\r\n\t\t\t\t\tif (innerWidth < 992) {\r\n\t\t\t\t\t\tfilters.classList.remove('show');\r\n\t\t\t\t\t\tdocument.querySelector('#btn-filter').textContent = 'Filters';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (el.matches('.fa-bars')) {\r\n\t\t\t\t\tmenuOpen = !menuOpen;\r\n\t\t\t\t\tjQuery('.header-main__nav').toggleClass('show');\r\n\r\n\t\t\t\t\tdocument.body.classList.toggle('shade');\r\n\t\t\t\t\tdocument.querySelector('html').classList.toggle('shade');\r\n\r\n\t\t\t\t\tconst shopNav = document.querySelector(\r\n\t\t\t\t\t\t'.header-main__nav-items--shop'\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tconst mainNav = document.querySelector(\r\n\t\t\t\t\t\t'.header-main__nav-items:first-of-type'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tshopNav.style.top = mainNav.getBoundingClientRect().height + 'px';\r\n\t\t\t\t\tshopNav.style.transition = 'top 0s ease-in-out';\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tshopNav.style.transition = 'top 0.3s ease-in-out';\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst isLinkChevron =\r\n\t\t\t\t\tel.matches('.fa-chevron-down') &&\r\n\t\t\t\t\tel.parentNode.matches('.header-main__nav-link');\r\n\r\n\t\t\t\tif (el.matches('.header-main__nav-link') || isLinkChevron) {\r\n\t\t\t\t\tif (innerWidth >= 992) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst element = isLinkChevron ? el.parentNode : el;\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!element.nextElementSibling ||\r\n\t\t\t\t\t\telement.matches('.header-main__nav-item--parent')\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\telement.matches('.header-main__nav-link--book-large') ||\r\n\t\t\t\t\t\telement.matches('.header-main__nav-link--list')\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tconst subNav = element.nextElementSibling;\r\n\t\t\t\t\tsubNav.classList.add('active');\r\n\r\n\t\t\t\t\tconst backLink = document.createElement('button');\r\n\t\t\t\t\tbackLink.setAttribute(\r\n\t\t\t\t\t\t'data-shop-btn',\r\n\t\t\t\t\t\telement.matches('.header-main__nav-link--shop')\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbackLink.textContent = 'Back';\r\n\t\t\t\t\tbackLink.className = 'header-main__back';\r\n\r\n\t\t\t\t\tconst icon = document.createElement('i');\r\n\t\t\t\t\ticon.className = 'fas fa-chevron-down';\r\n\r\n\t\t\t\t\tbackLink.prepend(icon);\r\n\t\t\t\t\tsubNav.append(backLink);\r\n\r\n\t\t\t\t\tif (!element.matches('.header-main__nav-link--book-large')) {\r\n\t\t\t\t\t\tconst navItem = subNav.previousElementSibling.cloneNode(true);\r\n\t\t\t\t\t\tnavItem.classList.add('header-main__nav-item--parent');\r\n\r\n\t\t\t\t\t\tsubNav.prepend(navItem);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (element.matches('.header-main__nav-link--shop')) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst mainNav = document.querySelector(\r\n\t\t\t\t\t\t'.header-main__nav-items:first-of-type'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tmainNav.style.height =\r\n\t\t\t\t\t\tbackLink.getBoundingClientRect().height +\r\n\t\t\t\t\t\tbackLink.getBoundingClientRect().top +\r\n\t\t\t\t\t\t'px';\r\n\t\t\t\t\tconst shopNav = document.querySelector(\r\n\t\t\t\t\t\t'.header-main__nav-items--shop'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tshopNav.style.top = `calc(${\r\n\t\t\t\t\t\tbackLink.getBoundingClientRect().height +\r\n\t\t\t\t\t\tbackLink.getBoundingClientRect().top +\r\n\t\t\t\t\t\t'px'\r\n\t\t\t\t\t} - 2rem)`;\r\n\t\t\t\t}\r\n\t\t\t\tif (el.matches('.header-main__back')) {\r\n\t\t\t\t\tif (innerWidth >= 992) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tconst subNav = el.parentNode;\r\n\t\t\t\t\tsubNav.classList.remove('active');\r\n\t\t\t\t\tconst parentNavItem = subNav.querySelector(\r\n\t\t\t\t\t\t'.header-main__nav-item--parent'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (parentNavItem) {\r\n\t\t\t\t\t\tparentNavItem.remove();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst previousList = el.parentNode.parentNode.parentNode;\r\n\t\t\t\t\tconst lastItem = Array.from(previousList.children).pop();\r\n\r\n\t\t\t\t\tel.remove();\r\n\r\n\t\t\t\t\tif (el.getAttribute('data-shop-btn') === 'true') {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst mainNav = document.querySelector(\r\n\t\t\t\t\t\t'.header-main__nav-items:first-of-type'\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tmainNav.style.height =\r\n\t\t\t\t\t\tlastItem.getBoundingClientRect().height +\r\n\t\t\t\t\t\tlastItem.getBoundingClientRect().top +\r\n\t\t\t\t\t\t'px';\r\n\t\t\t\t\tconst shopNav = document.querySelector(\r\n\t\t\t\t\t\t'.header-main__nav-items--shop'\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tshopNav.style.top = `calc(${\r\n\t\t\t\t\t\tlastItem.getBoundingClientRect().height +\r\n\t\t\t\t\t\tlastItem.getBoundingClientRect().top +\r\n\t\t\t\t\t\t'px'\r\n\t\t\t\t\t} - 2rem)`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (menuOpen && el.matches('body')) {\r\n\t\t\t\t\tdocument.body.classList.remove('shade');\r\n\t\t\t\t\tdocument.querySelector('html').classList.remove('shade');\r\n\t\t\t\t\tdocument.querySelector('.header-main__nav').classList.remove('show');\r\n\t\t\t\t\tmenuOpen = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (searchOpen && el.matches('body')) {\r\n\t\t\t\t\tif (innerWidth >= 992) {\r\n\t\t\t\t\t\tdocument.querySelector('.header-main__search-btn').click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.querySelector('.header-main__search').click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsearchOpen = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tconst filterSidebar = document.querySelector(\r\n\t\t\t\t'.category-filters .elementor-column-wrap'\r\n\t\t\t);\r\n\t\t\tconst footer = document.querySelector('[data-elementor-type=\"footer\"]');\r\n\r\n\t\t\tif (filterSidebar) {\r\n\t\t\t\tfunction getStickyHeights() {\r\n\t\t\t\t\treturn Array.from(\r\n\t\t\t\t\t\tdocument.querySelectorAll('.header-main__nav-items--shop')\r\n\t\t\t\t\t).reduce(function (total, el) {\r\n\t\t\t\t\t\treturn total + el.offsetHeight;\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t\tlet stickyHeights = getStickyHeights();\r\n\r\n\t\t\t\tlet isSticky = false;\r\n\r\n\t\t\t\tconst categoryTitle = filterSidebar.querySelector('.category-title');\r\n\r\n\t\t\t\tfunction stickyFilters() {\r\n\t\t\t\t\tif (innerWidth < 992) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstickyHeights = getStickyHeights();\r\n\r\n\t\t\t\t\tconst filterRect = filterSidebar.getBoundingClientRect();\r\n\r\n\t\t\t\t\tfilterSidebar.style.height = `calc(100vh - ${stickyHeights}px)`;\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tfilterRect.top + categoryTitle.getBoundingClientRect().height <=\r\n\t\t\t\t\t\tstickyHeights\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tif (isSticky) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tisSticky = true;\r\n\t\t\t\t\t\tfilterSidebar.style.position = 'sticky';\r\n\t\t\t\t\t\tfilterSidebar.style.top = stickyHeights + 'px';\r\n\t\t\t\t\t\tfilterSidebar.classList.add('sticky');\r\n\t\t\t\t\t\tcategoryTitle.style.display = 'none';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcategoryTitle.style.display = 'block';\r\n\r\n\t\t\t\t\t\tif (!isSticky) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tisSticky = false;\r\n\t\t\t\t\t\tfilterSidebar.style.position = 'static';\r\n\t\t\t\t\t\tfilterSidebar.classList.remove('sticky');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstickyFilters();\r\n\r\n\t\t\t\twindow.addEventListener('scroll', throttle(stickyFilters, 50));\r\n\t\t\t}\r\n\r\n\t\t\tconst products = document.querySelector('.products');\r\n\t\t\tconst helpBanner = document.querySelector('.help-banner');\r\n\r\n\t\t\tif (products && !document.querySelector('.category-description')) {\r\n\t\t\t\tif (innerWidth > 992) {\r\n\t\t\t\t\tconst productsWrapper = document.querySelector('.products-wrapper');\r\n\t\t\t\t\tconst elementorProductsWrapper = document.querySelector(\r\n\t\t\t\t\t\t'.post-type-archive-product .elementor-widget-woocommerce-products'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (elementorProductsWrapper) {\r\n\t\t\t\t\t\telementorProductsWrapper.style.marginTop = '-20px';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (productsWrapper) {\r\n\t\t\t\t\t\tdocument.querySelector('.products-wrapper').style.marginTop = '0';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (products && helpBanner) {\r\n\t\t\t\tlet productIndex = 12;\r\n\t\t\t\tlet loading = false;\r\n\r\n\t\t\t\tlet showingHelpBanner = false;\r\n\t\t\t\tproducts.style['grid-row-gap'] = 0;\r\n\r\n\t\t\t\tfunction loadProducts() {\r\n\t\t\t\t\tif (showingHelpBanner) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (productIndex > products.children.length) {\r\n\t\t\t\t\t\tshowingHelpBanner = true;\r\n\t\t\t\t\t\thelpBanner.style.opacity = 1;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!loading &&\r\n\t\t\t\t\t\twindow.pageYOffset >\r\n\t\t\t\t\t\t\tdocument.documentElement.scrollHeight -\r\n\t\t\t\t\t\t\t\twindow.innerHeight -\r\n\t\t\t\t\t\t\t\tfooter.clientHeight -\r\n\t\t\t\t\t\t\t\t300\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tloading = true;\r\n\r\n\t\t\t\t\t\tproductIndex += 12;\r\n\r\n\t\t\t\t\t\tArray.from(products.children)\r\n\t\t\t\t\t\t\t.slice(0, productIndex)\r\n\t\t\t\t\t\t\t.forEach(function (product) {\r\n\t\t\t\t\t\t\t\tproduct.classList.add('show');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tloading = false; // reset value of loading once content loaded\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\twindow.addEventListener('scroll', throttle(loadProducts, 200));\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t},\r\n\t\tfalse\r\n\t);\r\n})();\r\n\r\njQuery(document).ready(function($) {\r\n\tvar activeMenu = null;\r\n\tvar activeSubMenu = null;\r\n\tvar ignoreClassesClicked = [\r\n\t\t'subnavigation-categories',\r\n\t\t'subnavigation-category',\r\n\t\t'header-subnavigation',\r\n\t\t'header-main__nav-items',\r\n\t\t'header-main__nav-item',\r\n\t\t'header-main__nav-link',\r\n\t\t'header-main',\r\n\t\t'header-navigation',\r\n\t\t'main-navigation-item'\r\n\t];\r\n\tvar mobileMenuOpen = false;\r\n\tvar initialWindowWidth = $(window).outerWidth();\r\n\r\n\tfunction ClassClickedCanBeIgnored(target) {\r\n\t\tfor(var i = 0; i < ignoreClassesClicked.length; i ++) {\r\n\t\t\tif($(target).hasClass(ignoreClassesClicked[i])) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} \r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction displayShopSubMenuIfHomepage() {\r\n\t\tvar pathName = window.location.pathname;\r\n\r\n\t\tif ((pathName == '/' || pathName.indexOf(\"product\") > -1 || pathName.indexOf(\"product-category\") > -1) && initialWindowWidth > 991) {\r\n\t\t\tvar shopLink = $('.main-navigation a.shop-menu-link');\r\n\r\n\t\t\tshopLink.addClass(\"active\");\r\n\t\t\tshopLink.parent('li').addClass(\"active\");\r\n\t\t\t$(\".header-subnavigation\").removeClass('hide');\r\n\t\t\t$(\".subnavigation-categories\").removeClass(\"hide\");\r\n\t\t\t$(\"[data-elementor-type='header']\").addClass(\"menu-spacer\");\r\n\r\n\t\t\tactiveMenu = shopLink;\r\n\t\t}\r\n\t}\r\n\r\n\t$(window).click(function (e) {\r\n\t\tif(activeMenu == null && activeSubMenu == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar target = $(e.target);\r\n\t\tvar targetClassCanBeIgnored = ClassClickedCanBeIgnored(target);\r\n\r\n\t\tif((activeMenu && target[0] != activeMenu[0]) && (activeSubMenu && target[0] != activeSubMenu[0]) && targetClassCanBeIgnored) {\r\n\t\t\t$('.header-subnavigation').addClass('hide');\r\n\t\t\t$(\"[data-elementor-type='header']\").removeClass(\"menu-spacer\");\r\n\t\t\t$(activeSubMenu).siblings(\"ul\").hide();\r\n\t\t\t$(activeSubMenu).siblings(\".book-large\").hide();\r\n\t\t\tactiveMenu = null;\r\n\t\t\tactiveSubMenu = null;\r\n\t\t\t$('.main-navigation li').removeClass(\"active\");\r\n\t\t\t$(\".subnavigation-categories\").addClass(\"hide\");\r\n\t\t\t$(\".header-main__nomadic-ad\").addClass(\"hide\");\r\n\t\t\t$(\".main-navigation a\").removeClass(\"active\");\r\n\t\t}\r\n\r\n\t\tif(activeMenu != null && activeSubMenu == null && targetClassCanBeIgnored) {\r\n\t\t\tif(target[0] != activeMenu[0]) {\r\n\t\t\t\t$('.header-subnavigation').addClass('hide');\r\n\t\t\t\t$('.main-navigation li').removeClass(\"active\");\r\n\t\t\t\t$(\".main-navigation a\").removeClass(\"active\");\r\n\t\t\t\t$(\"[data-elementor-type='header']\").removeClass(\"menu-spacer\");\r\n\t\t\t\tactiveMenu = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(activeSubMenu != null && targetClassCanBeIgnored) {\r\n\t\t\tif(target[0] != activeSubMenu[0]) {\r\n\t\t\t\t$(activeSubMenu).siblings(\"ul\").hide();\r\n\t\t\t\tactiveSubMenu = null;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$('.main-navigation a').hover(function (e) {\r\n\t\t$('.main-navigation li').removeClass(\"active\");\r\n\t\t$(\".main-navigation a\").removeClass(\"active\");\r\n\t\t$(\".header-subnavigation\").addClass('hide');\r\n\t\t$(this).addClass(\"active\");\r\n\r\n\t\tif($(this).hasClass(\"shop-menu-link\")) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t$(this).parent('li').addClass(\"active\");\r\n\t\t\t$(\".header-subnavigation\").removeClass('hide');\r\n\t\t\t$(\"#shopMenu\").removeClass(\"hide\");\r\n\t\t\t$(\".header-main__nomadic-ad\").addClass(\"hide\");\r\n\t\t\t$(\"[data-elementor-type='header']\").addClass(\"menu-spacer\");\r\n\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif($(this).hasClass(\"nomadic-energy-link\")) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t$(this).parent('li').addClass(\"active\");\r\n\t\t\t$(\".header-subnavigation\").removeClass('hide');\r\n\t\t\t$(\".subnavigation-categories\").addClass(\"hide\");\r\n\t\t\t$(\".header-main__nomadic-ad\").removeClass(\"hide\");\r\n\t\t}\r\n\r\n\t\tif($(this).hasClass(\"van-conversion-menu-link\")) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t$(this).parent('li').addClass(\"active\");\r\n\t\t\t$(\".header-subnavigation\").removeClass('hide');\r\n\t\t\t$(\".subnavigation-categories\").addClass(\"hide\");\r\n\t\t\t$(\"#vanConversionMenu\").removeClass(\"hide\");\r\n\t\t}\r\n\r\n\t\tif($(this).hasClass(\"van-life-menu-link\")) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t$(this).parent('li').addClass(\"active\");\r\n\t\t\t$(\".header-subnavigation\").removeClass('hide');\r\n\t\t\t$(\".subnavigation-categories\").addClass(\"hide\");\r\n\t\t\t$(\"#vanLifeMenu\").removeClass(\"hide\");\r\n\t\t}\r\n\r\n\t\tactiveMenu = $(this);\r\n\t});\r\n\r\n\t$('.header-subnavigation .subnavigation-link').hover(function (e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tif(activeSubMenu != null) {\r\n\t\t\t$(activeSubMenu).siblings(\"ul\").hide();\r\n\t\t\t$(activeSubMenu).siblings(\".book-large\").hide();\r\n\t\t}\r\n\r\n\t\tif($(this).hasClass('header-main__nav-link--book-large')) {\r\n\t\t\t$(this).siblings(\".book-large\").css('display', 'block');\r\n\t\t} else {\r\n\t\t\t$(this).siblings(\"ul\").css('display', 'flex');\r\n\r\n\t\t}\r\n\t\tactiveSubMenu = $(this);\r\n\t});\r\n\r\n\t$('.menu-switcher').click(function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar target = $(\".header-navigation > .center-navigation > .search-bar\");\r\n\t\tvar isHidden = target.hasClass(\"hide\");\r\n\r\n\t\tif($(window).outerWidth() < 992) {\r\n\t\t\t$('.main-menu > .header-main__search-mobile-wrapper').toggleClass('open');\r\n\t\t} else {\r\n\r\n\t\t\tif(isHidden) {\r\n\t\t\t\ttarget.removeClass(\"hide\");\r\n\t\t\t\t$('.main-navigation').addClass(\"hide\");\r\n\t\t\t\t$('.main-navigation li').removeClass(\"active\");\r\n\t\t\t\t$(this).removeClass(\"menu-mode\").addClass(\"search-mode\");\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\ttarget.addClass(\"hide\");\r\n\t\t\t\t$(\".main-navigation\").removeClass(\"hide\");\r\n\t\t\t\t$(this).removeClass(\"search-mode\").addClass(\"menu-mode\");\r\n\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tdisplayShopSubMenuIfHomepage();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//$(\".header-navigation > .search-bar\").removeClass('hide');\r\n\t});\r\n\r\n\t$('.mobile-menu-icon').click(function () {\r\n\t\tmobileMenuOpen = ! mobileMenuOpen;\r\n\r\n\t\tif(mobileMenuOpen) {\r\n\t\t\t$('.mobile-navigation').addClass(\"show\");\r\n\t\t\t$('.main-menu > .header-main__search-mobile-wrapper').removeClass('open');\r\n\t\t} else {\r\n\t\t\t$('.mobile-navigation').removeClass(\"show\");\r\n\t\t\t$('.main-menu > .header-main__search-mobile-wrapper').removeClass('open');\r\n\t\t}\r\n\t});\r\n\r\n\tfunction showMobileNavigationIfMobileWidth() {\r\n\t\tvar width = $(window).outerWidth();\r\n\r\n\t\tif(width > 991 && mobileMenuOpen) {\r\n\t\t\tmobileMenuOpen = false;\r\n\t\t\t$('.mobile-navigation').removeClass(\"show\");\r\n\t\t}\r\n\r\n\t\tif(width < 992 && activeMenu) {\r\n\t\t\t$('.header-subnavigation').addClass('hide');\r\n\t\t\t$(activeSubMenu).siblings(\"ul\").hide();\r\n\t\t\t$(activeSubMenu).siblings(\".book-large\").hide();\r\n\t\t\tactiveMenu = null;\r\n\t\t\tactiveSubMenu = null;\r\n\t\t\t$('.main-navigation li').removeClass(\"active\");\r\n\t\t\t$(\".subnavigation-categories\").addClass(\"hide\");\r\n\t\t\t$(\".header-main__nomadic-ad\").addClass(\"hide\");\r\n\t\t\t$(\".main-navigation a\").removeClass(\"active\");\r\n\t\t}\r\n\r\n\t\tif(width < 992 & $('.menu-switcher').hasClass(\"search-mode\")) {\r\n\t\t\t$(\".header-navigation > .center-navigation > .search-bar\").addClass('hide');\r\n\t\t\t$('.menu-switcher').removeClass(\"search-mode\").addClass(\"menu-mode\");\r\n\t\t}\r\n\t}\r\n\r\n\t$(window).resize(function () {\r\n\t\tshowMobileNavigationIfMobileWidth();\r\n\t});\r\n\r\n\t// If on homepage show shop subcategory\r\n\tdisplayShopSubMenuIfHomepage();\r\n\r\n\t$(\"input#keywordSearch\").keyup(function() {\r\n\t\tif($(this).val().length == 0) {\r\n\t\t\t$('.header-navigation .search-bar .close').hide();\r\n\t\t\t$('.header-navigation .search-bar .search').replaceWith('<i class=\"fas fa-search search\"></i>');\r\n\t\t} else {\r\n\t\t\t$('.header-navigation .search-bar .close').show();\r\n\r\n\t\t\tif($('.header-navigation .search-bar .search').hasClass('fa-spin')) {\r\n\t\t\t\t$('.header-navigation .search-bar .search').replaceWith('<i class=\"fas fa-search search\"></i>');\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*if ($(this).val().length > 2) {\r\n\t\t\t\r\n\t\t\tvar valThis = this.value.toLowerCase();\r\n\t\t\tvar length = this.value.length;\r\n\r\n\t\t\t$('.objType').each(function () {\r\n\t\t        var text  = $(this).text(),\r\n\t\t            textL = text.toLowerCase(),\r\n\t\t            textStart = textL.indexOf(valThis),\r\n\t\t            textEnd = textStart+valThis.length;\r\n\t\t            //n = textL.indexOf(valThis);\r\n\t\t         var htmlR = text.substring(0,textStart)+'<b>' + text.substring(textStart,textEnd) + '</b>' + text.substring(textStart+length);\r\n\t\t        \r\n\t\t        if(textStart!=-1) {\r\n\t\t          $(\"#\"+this.id+\"r\").html(htmlR).show()\r\n\t\t        \t$(this).hide();\r\n\t\t        }\r\n\t\t        else {\r\n\t\t         $(\"#\"+this.id+\"r\").empty();\r\n\t\t        \t$(this).hide();\r\n\t\t        }\r\n\t\t    });\r\n\t\t} else {\r\n\t\t\t$(\"#datafetch\").hide();\r\n\t\t}*/\r\n\r\n\t\t//$('#datafetch').empty();\r\n\r\n    });\r\n\r\n    $('.header-navigation .search-bar .close').hide();\r\n\r\n    /*$('.header-navigation .search-bar .close').click(function() {\r\n    \t$('input#keywordSearch').val('');\r\n    \t$('#datafetch').hide().empty();\r\n    \t$(this).hide();\r\n    \t$('.header-navigation .search-bar .search').replaceWith('<i class=\"fas fa-search search\"></i>');\r\n    }); */\r\n});\r\n"]},"metadata":{},"sourceType":"module"}